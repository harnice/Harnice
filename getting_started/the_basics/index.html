
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://harnice.github.io/Harnice/getting_started/the_basics/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../installation/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>The Basics - Harnice</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Red Hat Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#workflow-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Harnice" class="md-header__button md-logo" aria-label="Harnice" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Harnice
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The Basics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Harnice" class="md-nav__button md-logo" aria-label="Harnice" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Harnice
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    The Basics
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Libraries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Products
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Products
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_harness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Harnesses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Systems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_device/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Devices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_disconnect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Disconnects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_macro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Macros
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_channel_type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Channel Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_cable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_flagnote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flagnotes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_part/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../products/_titleblock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Titleblocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_manipulating_files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manipulating Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_library_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Harnice Libraries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_circuits_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manipulating Circuits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_feature_tree_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Tree Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_formboard_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Formboard Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_note_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with Harnice Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_system_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_appearance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Appearance Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/_svg_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SVG Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Interacting with Data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interacting with Data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_channel_maps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Channel Maps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_circuits_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Circuits Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_disconnect_maps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Disconnect Maps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_formboard_graphs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Formboard Graphs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_instances_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instances Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_library_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library History
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_netlists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Netlists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_post_harness_instances_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Post-Harness Instances Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_revision_history_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Revision History Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_signals_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signals Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interacting_with_data/_system_manifests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Manifests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="workflow-overview"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 1.75C0 .784.784 0 1.75 0h3.5C6.216 0 7 .784 7 1.75v3.5A1.75 1.75 0 0 1 5.25 7H4v4a1 1 0 0 0 1 1h4v-1.25C9 9.784 9.784 9 10.75 9h3.5c.966 0 1.75.784 1.75 1.75v3.5A1.75 1.75 0 0 1 14.25 16h-3.5A1.75 1.75 0 0 1 9 14.25v-.75H5A2.5 2.5 0 0 1 2.5 11V7h-.75A1.75 1.75 0 0 1 0 5.25Zm1.75-.25a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Zm9 9a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Z"/></svg></span> Workflow Overview</h1>
<p>Harnice supports different kinds of <em>products</em>, each of which have basic, distinct properties and store information in their respective ways. </p>
<p>When you "run" Harnice, you're taking the input files of one product, and per a set of rules that you define, output files are generated. This process is called <strong>render</strong>. </p>
<p>Some products have input and output files that are compatible with each other. Here's the basic workflow. </p>
<p><img alt="Workflow overview graph" src="../images/the_basics_images/workflow_overview.png" /></p>
<p><em>each gray bar is a <code>render</code> operation on a different product, orange is a user-defined set of render instructions, and blue is a file.</em></p>
<h1 id="feature-tree-product-as-intended"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 14.25 15h-9a.75.75 0 0 1 0-1.5h9a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 10 4.25V1.5H5.75a.25.25 0 0 0-.25.25v2.5a.75.75 0 0 1-1.5 0Zm1.72 4.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734l1.47-1.47-1.47-1.47a.75.75 0 0 1 0-1.06M3.28 7.78 1.81 9.25l1.47 1.47a.75.75 0 0 1-.018 1.042.75.75 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042m8.22-6.218V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914z"/></svg></span> Feature Tree <em>(product as-intended)</em></h1>
<p>Most products have something called a <strong>feature tree</strong>, which is inspired by 3D cad modeling. It's written directly in Python, and besides from some housekeeping that goes on in the background, is the bulk of what's happening when you <code>render</code> a product.</p>
<p>Inside the <code>feature tree</code> is where you can write your rules on how to build your product. Here's some ideas about how you can express your build intent in logical language:</p>
<ul>
<li>If a harness mates with a device's ethernet socket, specifiy an RJ45 connector on that end of the harness.</li>
<li>If a harness contains signals that drive a safety-critical valve, clad that harness with red sleeving. </li>
<li>If a system has more than 9 output devices connected to an input device that has 8 inputs, throw an error.</li>
<li>If a wire is conducting a thermocouple signal, use special cable and contacts.</li>
<li>Specify a label to be applied to a harness whose text is derived from the name of the harness's mating device. </li>
<li>If part x is called out as a component of a harness, and part x always requires tool y set to z, add a buildnote with a leader to x that says y-z. </li>
</ul>
<p>Here's the default feature tree that you get when you try to render a product for the first time. You'd add your logic in here somewhere.</p>
<p>Keep an eye out for how the script references files for the product it's operating on, for other products, and how it generates outputs all in the same stroke as performing the derivation of the part. </p>
<details class="note">
<summary>Default harness feature tree</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice</span><span class="w"> </span><span class="kn">import</span> <span class="n">fileio</span><span class="p">,</span> <span class="n">state</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice.utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">circuit_utils</span><span class="p">,</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">formboard_utils</span><span class="p">,</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">note_utils</span><span class="p">,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">library_utils</span><span class="p">,</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">feature_tree_utils</span><span class="p">,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice.lists</span><span class="w"> </span><span class="kn">import</span> <span class="n">instances_list</span><span class="p">,</span> <span class="n">post_harness_instances_list</span><span class="p">,</span> <span class="n">rev_history</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="p">{</span><span class="n">build_macro_block</span><span class="p">}</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="c1">#                  HARNESS BUILD RULES</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c1"># example: assign a special contact to one specific conductor</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="n">instances</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">)</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="n">circuit_instance</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="n">connector_at_end_a</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;channel_group&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;channel-MIC2.out1-PREAMP1.in2&quot;</span><span class="p">:</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signal_of_channel_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;pos&quot;</span><span class="p">:</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;circuit&quot;</span><span class="p">:</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>                <span class="n">circuit_instance</span> <span class="o">=</span> <span class="n">instance</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>                <span class="n">connector_at_end_a</span> <span class="o">=</span> <span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>                    <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;node_at_end_a&quot;</span><span class="p">),</span> <span class="s2">&quot;connector_group&quot;</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>                <span class="p">)</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>                <span class="n">new_instance_name</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">circuit_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;instance_name&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">-special_contact&quot;</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>                <span class="p">)</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>                <span class="n">circuit_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">circuit_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;circuit_id&quot;</span><span class="p">))</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>                <span class="n">instances_list</span><span class="o">.</span><span class="n">new_instance</span><span class="p">(</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>                    <span class="n">new_instance_name</span><span class="p">,</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>                    <span class="p">{</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>                        <span class="s2">&quot;bom_line_number&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>                        <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;TXPS20&quot;</span><span class="p">,</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>                        <span class="s2">&quot;item_type&quot;</span><span class="p">:</span> <span class="s2">&quot;contact&quot;</span><span class="p">,</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>                        <span class="s2">&quot;location_type&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>                        <span class="s2">&quot;circuit_id&quot;</span><span class="p">:</span> <span class="n">circuit_id</span><span class="p">,</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>                        <span class="s2">&quot;connector_group&quot;</span><span class="p">:</span> <span class="n">connector_at_end_a</span><span class="p">,</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>                    <span class="p">},</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>                <span class="p">)</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>                <span class="n">circuit_utils</span><span class="o">.</span><span class="n">squeeze_instance_between_ports_in_circuit</span><span class="p">(</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>                    <span class="n">new_instance_name</span><span class="p">,</span> <span class="n">circuit_id</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>                <span class="p">)</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="c1"># example: add a backshell</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;X1.B.conn&quot;</span><span class="p">,</span> <span class="s2">&quot;PREAMP2.in2.conn&quot;</span><span class="p">]:</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>        <span class="n">instances_list</span><span class="o">.</span><span class="n">new_instance</span><span class="p">(</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;connector_group&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.bs&quot;</span><span class="p">,</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>            <span class="p">{</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>                <span class="s2">&quot;bom_line_number&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>                <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;M85049-90_9Z03&quot;</span><span class="p">,</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>                <span class="s2">&quot;item_type&quot;</span><span class="p">:</span> <span class="s2">&quot;backshell&quot;</span><span class="p">,</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>                <span class="s2">&quot;parent_instance&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>                <span class="s2">&quot;location_type&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>                <span class="s2">&quot;connector_group&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connector_group&quot;</span><span class="p">),</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>                <span class="s2">&quot;parent_csys_instance_name&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>                    <span class="n">instances_list</span><span class="o">.</span><span class="n">instance_in_connector_group_with_item_type</span><span class="p">(</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>                        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connector_group&quot;</span><span class="p">),</span> <span class="s2">&quot;node&quot;</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>                    <span class="p">)</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>                <span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>                <span class="s2">&quot;parent_csys_outputcsys_name&quot;</span><span class="p">:</span> <span class="s2">&quot;origin&quot;</span><span class="p">,</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>                <span class="s2">&quot;lib_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>            <span class="p">},</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>        <span class="p">)</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>        <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>            <span class="p">{</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>                <span class="s2">&quot;parent_csys_instance_name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;connector_group&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.bs&quot;</span><span class="p">,</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>                <span class="s2">&quot;parent_csys_outputcsys_name&quot;</span><span class="p">:</span> <span class="s2">&quot;connector&quot;</span><span class="p">,</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>            <span class="p">},</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a>        <span class="p">)</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a><span class="c1">#                   IMPORT PARTS FROM LIBRARY FOR GENERAL USE</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;connector&quot;</span><span class="p">,</span> <span class="s2">&quot;backshell&quot;</span><span class="p">]:</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;X100&quot;</span><span class="p">]:</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mpn&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;TXPA20&quot;</span><span class="p">]:</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a>                <span class="n">library_utils</span><span class="o">.</span><span class="n">pull</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a><span class="c1">#                  PROCESS HARNESS LAYOUT GRAPH</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a><span class="n">formboard_utils</span><span class="o">.</span><span class="n">validate_nodes</span><span class="p">()</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a><span class="n">instances</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">)</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cable&quot;</span><span class="p">:</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a>        <span class="k">for</span> <span class="n">instance2</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>            <span class="k">if</span> <span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parent_instance&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">):</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a>                <span class="k">if</span> <span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;conductor&quot;</span><span class="p">:</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a>                    <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a>                        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>                        <span class="p">{</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a>                            <span class="s2">&quot;node_at_end_a&quot;</span><span class="p">:</span> <span class="n">instances_list</span><span class="o">.</span><span class="n">instance_in_connector_group_with_item_type</span><span class="p">(</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a>                                <span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a>                                    <span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;node_at_end_a&quot;</span><span class="p">),</span> <span class="s2">&quot;connector_group&quot;</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>                                <span class="p">),</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a>                                <span class="s2">&quot;node&quot;</span><span class="p">,</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a>                            <span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a>                            <span class="s2">&quot;node_at_end_b&quot;</span><span class="p">:</span> <span class="n">instances_list</span><span class="o">.</span><span class="n">instance_in_connector_group_with_item_type</span><span class="p">(</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a>                                <span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a>                                    <span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;node_at_end_b&quot;</span><span class="p">),</span> <span class="s2">&quot;connector_group&quot;</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a>                                <span class="p">),</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a>                                <span class="s2">&quot;node&quot;</span><span class="p">,</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>                            <span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a>                        <span class="p">},</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a>                    <span class="p">)</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a>                    <span class="k">break</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118" href="#__codelineno-0-118"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;conductor&quot;</span><span class="p">,</span> <span class="s2">&quot;cable&quot;</span><span class="p">,</span> <span class="s2">&quot;net-channel&quot;</span><span class="p">]:</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119" href="#__codelineno-0-119"></a>        <span class="n">formboard_utils</span><span class="o">.</span><span class="n">map_instance_to_segments</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120" href="#__codelineno-0-120"></a>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121" href="#__codelineno-0-121"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122" href="#__codelineno-0-122"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;conductor&quot;</span><span class="p">,</span> <span class="s2">&quot;cable&quot;</span><span class="p">]:</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123" href="#__codelineno-0-123"></a>        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124" href="#__codelineno-0-124"></a>        <span class="k">for</span> <span class="n">instance2</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125" href="#__codelineno-0-125"></a>            <span class="k">if</span> <span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parent_instance&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">):</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126" href="#__codelineno-0-126"></a>                <span class="k">if</span> <span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127" href="#__codelineno-0-127"></a>                    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;conductor&quot;</span><span class="p">:</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128" href="#__codelineno-0-128"></a>                        <span class="n">length</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129" href="#__codelineno-0-129"></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130" href="#__codelineno-0-130"></a>                        <span class="n">length</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">instance2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131" href="#__codelineno-0-131"></a>        <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="n">length</span><span class="p">})</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132" href="#__codelineno-0-132"></a>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133" href="#__codelineno-0-133"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134" href="#__codelineno-0-134"></a><span class="c1">#                   ASSIGN BOM LINE NUMBERS</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135" href="#__codelineno-0-135"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136" href="#__codelineno-0-136"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137" href="#__codelineno-0-137"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;connector&quot;</span><span class="p">,</span> <span class="s2">&quot;cable&quot;</span><span class="p">,</span> <span class="s2">&quot;backshell&quot;</span><span class="p">]:</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138" href="#__codelineno-0-138"></a>        <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;bom_line_number&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139" href="#__codelineno-0-139"></a><span class="n">instances_list</span><span class="o">.</span><span class="n">assign_bom_line_numbers</span><span class="p">()</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140" href="#__codelineno-0-140"></a>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141" href="#__codelineno-0-141"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142" href="#__codelineno-0-142"></a><span class="c1">#       ASSIGN PRINT NAMES</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143" href="#__codelineno-0-143"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144" href="#__codelineno-0-144"></a><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145" href="#__codelineno-0-145"></a>    <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146" href="#__codelineno-0-146"></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;connector_cavity&quot;</span><span class="p">:</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147" href="#__codelineno-0-147"></a>            <span class="n">instance_name</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148" href="#__codelineno-0-148"></a>            <span class="n">print_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;cavity </span><span class="si">{</span><span class="n">instance_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="s1">&#39;.&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">instance_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">instance_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149" href="#__codelineno-0-149"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">instance_name</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">print_name</span><span class="p">})</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150" href="#__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151" href="#__codelineno-0-151"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;conductor&quot;</span><span class="p">,</span> <span class="s2">&quot;conductor-segment&quot;</span><span class="p">]:</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152" href="#__codelineno-0-152"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153" href="#__codelineno-0-153"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154" href="#__codelineno-0-154"></a>                <span class="p">{</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155" href="#__codelineno-0-155"></a>                    <span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cable_identifier&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; of &#39;</span><span class="si">{</span><span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cable_group&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;print_name&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156" href="#__codelineno-0-156"></a>                <span class="p">},</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157" href="#__codelineno-0-157"></a>            <span class="p">)</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158" href="#__codelineno-0-158"></a>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159" href="#__codelineno-0-159"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;net-channel&quot;</span><span class="p">:</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160" href="#__codelineno-0-160"></a>            <span class="n">print_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;this_channel_from_device_channel_id&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; of &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;this_channel_from_device_refdes&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; to &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;this_channel_to_device_channel_id&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; of &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;this_channel_to_device_refdes&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161" href="#__codelineno-0-161"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162" href="#__codelineno-0-162"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">print_name</span><span class="p">}</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163" href="#__codelineno-0-163"></a>            <span class="p">)</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164" href="#__codelineno-0-164"></a>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165" href="#__codelineno-0-165"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;net-channel-segment&quot;</span><span class="p">:</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166" href="#__codelineno-0-166"></a>            <span class="n">print_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parent_instance&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;this_channel_from_device_channel_id&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; of &#39;</span><span class="si">{</span><span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parent_instance&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;this_channel_from_device_refdes&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; to &#39;</span><span class="si">{</span><span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parent_instance&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;this_channel_to_device_channel_id&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; of &#39;</span><span class="si">{</span><span class="n">instances_list</span><span class="o">.</span><span class="n">attribute_of</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parent_instance&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;this_channel_to_device_refdes&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167" href="#__codelineno-0-167"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168" href="#__codelineno-0-168"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">print_name</span><span class="p">}</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169" href="#__codelineno-0-169"></a>            <span class="p">)</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170" href="#__codelineno-0-170"></a>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171" href="#__codelineno-0-171"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;connector&quot;</span><span class="p">:</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172" href="#__codelineno-0-172"></a>            <span class="n">print_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;connector_group&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173" href="#__codelineno-0-173"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174" href="#__codelineno-0-174"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">print_name</span><span class="p">}</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175" href="#__codelineno-0-175"></a>            <span class="p">)</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176" href="#__codelineno-0-176"></a>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177" href="#__codelineno-0-177"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cable-segment&quot;</span><span class="p">:</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178" href="#__codelineno-0-178"></a>            <span class="n">print_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cable_group&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179" href="#__codelineno-0-179"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180" href="#__codelineno-0-180"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">print_name</span><span class="p">}</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181" href="#__codelineno-0-181"></a>            <span class="p">)</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182" href="#__codelineno-0-182"></a>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183" href="#__codelineno-0-183"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;contact&quot;</span><span class="p">:</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184" href="#__codelineno-0-184"></a>            <span class="n">print_name</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mpn&quot;</span><span class="p">)</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185" href="#__codelineno-0-185"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186" href="#__codelineno-0-186"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">print_name</span><span class="p">}</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187" href="#__codelineno-0-187"></a>            <span class="p">)</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188" href="#__codelineno-0-188"></a>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189" href="#__codelineno-0-189"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190" href="#__codelineno-0-190"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191" href="#__codelineno-0-191"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192" href="#__codelineno-0-192"></a>                <span class="p">{</span><span class="s2">&quot;print_name&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">)},</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193" href="#__codelineno-0-193"></a>            <span class="p">)</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194" href="#__codelineno-0-194"></a>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195" href="#__codelineno-0-195"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196" href="#__codelineno-0-196"></a><span class="c1">#                  ADD BUILD NOTES</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197" href="#__codelineno-0-197"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198" href="#__codelineno-0-198"></a><span class="k">for</span> <span class="n">rev_row</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;revision history&quot;</span><span class="p">):</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199" href="#__codelineno-0-199"></a>    <span class="k">if</span> <span class="n">rev_row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rev&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">state</span><span class="o">.</span><span class="n">rev</span><span class="p">:</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200" href="#__codelineno-0-200"></a>        <span class="n">note_utils</span><span class="o">.</span><span class="n">make_rev_history_notes</span><span class="p">(</span><span class="n">rev_row</span><span class="p">)</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201" href="#__codelineno-0-201"></a>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202" href="#__codelineno-0-202"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203" href="#__codelineno-0-203"></a>    <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">note_utils</span><span class="o">.</span><span class="n">get_lib_build_notes</span><span class="p">(</span><span class="n">instance</span><span class="p">):</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204" href="#__codelineno-0-204"></a>        <span class="n">note_utils</span><span class="o">.</span><span class="n">new_note</span><span class="p">(</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205" href="#__codelineno-0-205"></a>            <span class="s2">&quot;build_note&quot;</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">affectedinstances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">)]</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206" href="#__codelineno-0-206"></a>        <span class="p">)</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207" href="#__codelineno-0-207"></a>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208" href="#__codelineno-0-208"></a><span class="n">note_utils</span><span class="o">.</span><span class="n">assign_buildnote_numbers</span><span class="p">()</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209" href="#__codelineno-0-209"></a>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210" href="#__codelineno-0-210"></a><span class="c1"># example: add notes to describe actions</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211" href="#__codelineno-0-211"></a><span class="c1"># note_utils.new_note(</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212" href="#__codelineno-0-212"></a><span class="c1">#     &quot;build_note&quot;,</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213" href="#__codelineno-0-213"></a><span class="c1">#     &quot;do this&quot;,</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214" href="#__codelineno-0-214"></a><span class="c1">#     affectedinstances=[&quot;X1.B.conn&quot;]</span>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215" href="#__codelineno-0-215"></a><span class="c1"># )</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216" href="#__codelineno-0-216"></a><span class="c1"># note_utils.new_note(</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217" href="#__codelineno-0-217"></a><span class="c1">#     &quot;build_note&quot;,</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218" href="#__codelineno-0-218"></a><span class="c1">#     &quot;do that&quot;</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219" href="#__codelineno-0-219"></a><span class="c1"># )</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220" href="#__codelineno-0-220"></a>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221" href="#__codelineno-0-221"></a><span class="c1"># example: combine buildnotes if their texts are similar</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222" href="#__codelineno-0-222"></a><span class="c1"># note_utils.combine_notes(&quot;Torque backshell to connector at 40 in-lbs&quot;,&quot;Torque backshell to connector at about 40 in-lbs&quot;)</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223" href="#__codelineno-0-223"></a>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224" href="#__codelineno-0-224"></a>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225" href="#__codelineno-0-225"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226" href="#__codelineno-0-226"></a><span class="c1">#                  PUT TOGETHER FORMBOARD SVG INSTANCE CONTENT</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227" href="#__codelineno-0-227"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228" href="#__codelineno-0-228"></a><span class="n">instances</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">)</span>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229" href="#__codelineno-0-229"></a><span class="n">note_instances</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230" href="#__codelineno-0-230"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231" href="#__codelineno-0-231"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;note&quot;</span><span class="p">:</span>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232" href="#__codelineno-0-232"></a>        <span class="n">note_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note_utils</span><span class="o">.</span><span class="n">parse_note_instance</span><span class="p">(</span><span class="n">instance</span><span class="p">))</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233" href="#__codelineno-0-233"></a>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234" href="#__codelineno-0-234"></a><span class="n">formboard_overview_instances</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235" href="#__codelineno-0-235"></a><span class="n">formboard_detail_instances</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236" href="#__codelineno-0-236"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237" href="#__codelineno-0-237"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238" href="#__codelineno-0-238"></a>        <span class="s2">&quot;connector&quot;</span><span class="p">,</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239" href="#__codelineno-0-239"></a>        <span class="s2">&quot;backshell&quot;</span><span class="p">,</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240" href="#__codelineno-0-240"></a>        <span class="s2">&quot;segment&quot;</span><span class="p">,</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241" href="#__codelineno-0-241"></a>        <span class="s2">&quot;node&quot;</span><span class="p">,</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242" href="#__codelineno-0-242"></a>        <span class="s2">&quot;origin&quot;</span><span class="p">,</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243" href="#__codelineno-0-243"></a>    <span class="p">]:</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244" href="#__codelineno-0-244"></a>        <span class="k">continue</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245" href="#__codelineno-0-245"></a>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246" href="#__codelineno-0-246"></a>    <span class="n">formboard_overview_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247" href="#__codelineno-0-247"></a>    <span class="n">formboard_detail_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248" href="#__codelineno-0-248"></a>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249" href="#__codelineno-0-249"></a>    <span class="n">detail_flag_note_counter</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250" href="#__codelineno-0-250"></a>    <span class="n">overview_flag_note_counter</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251" href="#__codelineno-0-251"></a>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252" href="#__codelineno-0-252"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;connector&quot;</span><span class="p">,</span> <span class="s2">&quot;backshell&quot;</span><span class="p">]:</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253" href="#__codelineno-0-253"></a>        <span class="n">formboard_detail_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254" href="#__codelineno-0-254"></a>            <span class="n">note_utils</span><span class="o">.</span><span class="n">make_bom_flagnote</span><span class="p">(</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255" href="#__codelineno-0-255"></a>                <span class="n">instance</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;flagnote-</span><span class="si">{</span><span class="n">detail_flag_note_counter</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256" href="#__codelineno-0-256"></a>            <span class="p">)</span>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257" href="#__codelineno-0-257"></a>        <span class="p">)</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258" href="#__codelineno-0-258"></a>        <span class="n">detail_flag_note_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259" href="#__codelineno-0-259"></a>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260" href="#__codelineno-0-260"></a>        <span class="n">formboard_detail_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261" href="#__codelineno-0-261"></a>            <span class="n">note_utils</span><span class="o">.</span><span class="n">make_part_name_flagnote</span><span class="p">(</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262" href="#__codelineno-0-262"></a>                <span class="n">instance</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;flagnote-</span><span class="si">{</span><span class="n">detail_flag_note_counter</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263" href="#__codelineno-0-263"></a>            <span class="p">)</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264" href="#__codelineno-0-264"></a>        <span class="p">)</span>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265" href="#__codelineno-0-265"></a>        <span class="n">detail_flag_note_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266" href="#__codelineno-0-266"></a>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267" href="#__codelineno-0-267"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;connector&quot;</span><span class="p">:</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268" href="#__codelineno-0-268"></a>        <span class="n">formboard_overview_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269" href="#__codelineno-0-269"></a>            <span class="n">note_utils</span><span class="o">.</span><span class="n">make_part_name_flagnote</span><span class="p">(</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270" href="#__codelineno-0-270"></a>                <span class="n">instance</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;flagnote-</span><span class="si">{</span><span class="n">overview_flag_note_counter</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271" href="#__codelineno-0-271"></a>            <span class="p">)</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272" href="#__codelineno-0-272"></a>        <span class="p">)</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273" href="#__codelineno-0-273"></a>        <span class="n">overview_flag_note_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274" href="#__codelineno-0-274"></a>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275" href="#__codelineno-0-275"></a>    <span class="k">for</span> <span class="n">note_instance</span> <span class="ow">in</span> <span class="n">note_instances</span><span class="p">:</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276" href="#__codelineno-0-276"></a>        <span class="k">if</span> <span class="n">note_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;note_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;build_note&quot;</span><span class="p">:</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277" href="#__codelineno-0-277"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">note_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278" href="#__codelineno-0-278"></a>                <span class="s2">&quot;note_affected_instances&quot;</span>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279" href="#__codelineno-0-279"></a>            <span class="p">):</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280" href="#__codelineno-0-280"></a>                <span class="n">formboard_detail_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281" href="#__codelineno-0-281"></a>                    <span class="n">note_utils</span><span class="o">.</span><span class="n">make_buildnote_flagnote</span><span class="p">(</span>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282" href="#__codelineno-0-282"></a>                        <span class="n">note_instance</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;flagnote-</span><span class="si">{</span><span class="n">detail_flag_note_counter</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283" href="#__codelineno-0-283"></a>                    <span class="p">)</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284" href="#__codelineno-0-284"></a>                <span class="p">)</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285" href="#__codelineno-0-285"></a>                <span class="n">detail_flag_note_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286" href="#__codelineno-0-286"></a>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287" href="#__codelineno-0-287"></a>        <span class="k">if</span> <span class="n">note_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;note_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;rev_change_callout&quot;</span><span class="p">:</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288" href="#__codelineno-0-288"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">note_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289" href="#__codelineno-0-289"></a>                <span class="s2">&quot;note_affected_instances&quot;</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290" href="#__codelineno-0-290"></a>            <span class="p">):</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291" href="#__codelineno-0-291"></a>                <span class="n">formboard_detail_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292" href="#__codelineno-0-292"></a>                    <span class="n">note_utils</span><span class="o">.</span><span class="n">make_rev_change_flagnote</span><span class="p">(</span>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293" href="#__codelineno-0-293"></a>                        <span class="n">note_instance</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;flagnote-</span><span class="si">{</span><span class="n">detail_flag_note_counter</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294" href="#__codelineno-0-294"></a>                    <span class="p">)</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295" href="#__codelineno-0-295"></a>                <span class="p">)</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296" href="#__codelineno-0-296"></a>                <span class="n">detail_flag_note_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297" href="#__codelineno-0-297"></a>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298" href="#__codelineno-0-298"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299" href="#__codelineno-0-299"></a><span class="c1">#                  BUILD HARNESS OUTPUTS</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300" href="#__codelineno-0-300"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301" href="#__codelineno-0-301"></a><span class="n">instances</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">)</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302" href="#__codelineno-0-302"></a><span class="n">scales</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303" href="#__codelineno-0-303"></a>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304" href="#__codelineno-0-304"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305" href="#__codelineno-0-305"></a>    <span class="s2">&quot;bom_exporter_bottom_up&quot;</span><span class="p">,</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306" href="#__codelineno-0-306"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307" href="#__codelineno-0-307"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308" href="#__codelineno-0-308"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;bom-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309" href="#__codelineno-0-309"></a><span class="p">)</span>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310" href="#__codelineno-0-310"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311" href="#__codelineno-0-311"></a>    <span class="s2">&quot;standard_harnice_formboard&quot;</span><span class="p">,</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312" href="#__codelineno-0-312"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313" href="#__codelineno-0-313"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314" href="#__codelineno-0-314"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;formboard-overview&quot;</span><span class="p">,</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315" href="#__codelineno-0-315"></a>    <span class="n">scale</span><span class="o">=</span><span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">),</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316" href="#__codelineno-0-316"></a>    <span class="n">input_instances</span><span class="o">=</span><span class="n">formboard_overview_instances</span><span class="p">,</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317" href="#__codelineno-0-317"></a><span class="p">)</span>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318" href="#__codelineno-0-318"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319" href="#__codelineno-0-319"></a>    <span class="s2">&quot;standard_harnice_formboard&quot;</span><span class="p">,</span>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320" href="#__codelineno-0-320"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-321"><a id="__codelineno-0-321" name="__codelineno-0-321" href="#__codelineno-0-321"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-322"><a id="__codelineno-0-322" name="__codelineno-0-322" href="#__codelineno-0-322"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;formboard-detail&quot;</span><span class="p">,</span>
</span><span id="__span-0-323"><a id="__codelineno-0-323" name="__codelineno-0-323" href="#__codelineno-0-323"></a>    <span class="n">scale</span><span class="o">=</span><span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">),</span>
</span><span id="__span-0-324"><a id="__codelineno-0-324" name="__codelineno-0-324" href="#__codelineno-0-324"></a>    <span class="n">input_instances</span><span class="o">=</span><span class="n">formboard_detail_instances</span><span class="p">,</span>
</span><span id="__span-0-325"><a id="__codelineno-0-325" name="__codelineno-0-325" href="#__codelineno-0-325"></a><span class="p">)</span>
</span><span id="__span-0-326"><a id="__codelineno-0-326" name="__codelineno-0-326" href="#__codelineno-0-326"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-327"><a id="__codelineno-0-327" name="__codelineno-0-327" href="#__codelineno-0-327"></a>    <span class="s2">&quot;segment_visualizer&quot;</span><span class="p">,</span>
</span><span id="__span-0-328"><a id="__codelineno-0-328" name="__codelineno-0-328" href="#__codelineno-0-328"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-329"><a id="__codelineno-0-329" name="__codelineno-0-329" href="#__codelineno-0-329"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-330"><a id="__codelineno-0-330" name="__codelineno-0-330" href="#__codelineno-0-330"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;cable_layout-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-331"><a id="__codelineno-0-331" name="__codelineno-0-331" href="#__codelineno-0-331"></a>    <span class="n">scale</span><span class="o">=</span><span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">),</span>
</span><span id="__span-0-332"><a id="__codelineno-0-332" name="__codelineno-0-332" href="#__codelineno-0-332"></a>    <span class="n">item_type</span><span class="o">=</span><span class="s2">&quot;cable-segment&quot;</span><span class="p">,</span>
</span><span id="__span-0-333"><a id="__codelineno-0-333" name="__codelineno-0-333" href="#__codelineno-0-333"></a>    <span class="n">segment_spacing_inches</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
</span><span id="__span-0-334"><a id="__codelineno-0-334" name="__codelineno-0-334" href="#__codelineno-0-334"></a><span class="p">)</span>
</span><span id="__span-0-335"><a id="__codelineno-0-335" name="__codelineno-0-335" href="#__codelineno-0-335"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-336"><a id="__codelineno-0-336" name="__codelineno-0-336" href="#__codelineno-0-336"></a>    <span class="s2">&quot;segment_visualizer&quot;</span><span class="p">,</span>
</span><span id="__span-0-337"><a id="__codelineno-0-337" name="__codelineno-0-337" href="#__codelineno-0-337"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-338"><a id="__codelineno-0-338" name="__codelineno-0-338" href="#__codelineno-0-338"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-339"><a id="__codelineno-0-339" name="__codelineno-0-339" href="#__codelineno-0-339"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;conductor-layout-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-340"><a id="__codelineno-0-340" name="__codelineno-0-340" href="#__codelineno-0-340"></a>    <span class="n">scale</span><span class="o">=</span><span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">),</span>
</span><span id="__span-0-341"><a id="__codelineno-0-341" name="__codelineno-0-341" href="#__codelineno-0-341"></a>    <span class="n">item_type</span><span class="o">=</span><span class="s2">&quot;conductor-segment&quot;</span><span class="p">,</span>
</span><span id="__span-0-342"><a id="__codelineno-0-342" name="__codelineno-0-342" href="#__codelineno-0-342"></a>    <span class="n">segment_spacing_inches</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
</span><span id="__span-0-343"><a id="__codelineno-0-343" name="__codelineno-0-343" href="#__codelineno-0-343"></a><span class="p">)</span>
</span><span id="__span-0-344"><a id="__codelineno-0-344" name="__codelineno-0-344" href="#__codelineno-0-344"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-345"><a id="__codelineno-0-345" name="__codelineno-0-345" href="#__codelineno-0-345"></a>    <span class="s2">&quot;segment_visualizer&quot;</span><span class="p">,</span>
</span><span id="__span-0-346"><a id="__codelineno-0-346" name="__codelineno-0-346" href="#__codelineno-0-346"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-347"><a id="__codelineno-0-347" name="__codelineno-0-347" href="#__codelineno-0-347"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-348"><a id="__codelineno-0-348" name="__codelineno-0-348" href="#__codelineno-0-348"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;channel-layout-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-349"><a id="__codelineno-0-349" name="__codelineno-0-349" href="#__codelineno-0-349"></a>    <span class="n">scale</span><span class="o">=</span><span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">),</span>
</span><span id="__span-0-350"><a id="__codelineno-0-350" name="__codelineno-0-350" href="#__codelineno-0-350"></a>    <span class="n">item_type</span><span class="o">=</span><span class="s2">&quot;net-channel-segment&quot;</span><span class="p">,</span>
</span><span id="__span-0-351"><a id="__codelineno-0-351" name="__codelineno-0-351" href="#__codelineno-0-351"></a>    <span class="n">segment_spacing_inches</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
</span><span id="__span-0-352"><a id="__codelineno-0-352" name="__codelineno-0-352" href="#__codelineno-0-352"></a><span class="p">)</span>
</span><span id="__span-0-353"><a id="__codelineno-0-353" name="__codelineno-0-353" href="#__codelineno-0-353"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-354"><a id="__codelineno-0-354" name="__codelineno-0-354" href="#__codelineno-0-354"></a>    <span class="s2">&quot;circuit_visualizer&quot;</span><span class="p">,</span>
</span><span id="__span-0-355"><a id="__codelineno-0-355" name="__codelineno-0-355" href="#__codelineno-0-355"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-356"><a id="__codelineno-0-356" name="__codelineno-0-356" href="#__codelineno-0-356"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-357"><a id="__codelineno-0-357" name="__codelineno-0-357" href="#__codelineno-0-357"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;circuitviz-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-358"><a id="__codelineno-0-358" name="__codelineno-0-358" href="#__codelineno-0-358"></a>    <span class="n">input_circuits</span><span class="o">=</span><span class="n">instances</span><span class="p">,</span>
</span><span id="__span-0-359"><a id="__codelineno-0-359" name="__codelineno-0-359" href="#__codelineno-0-359"></a><span class="p">)</span>
</span><span id="__span-0-360"><a id="__codelineno-0-360" name="__codelineno-0-360" href="#__codelineno-0-360"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-361"><a id="__codelineno-0-361" name="__codelineno-0-361" href="#__codelineno-0-361"></a>    <span class="s2">&quot;revision_history_table&quot;</span><span class="p">,</span>
</span><span id="__span-0-362"><a id="__codelineno-0-362" name="__codelineno-0-362" href="#__codelineno-0-362"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-363"><a id="__codelineno-0-363" name="__codelineno-0-363" href="#__codelineno-0-363"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-364"><a id="__codelineno-0-364" name="__codelineno-0-364" href="#__codelineno-0-364"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;revhistory-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-365"><a id="__codelineno-0-365" name="__codelineno-0-365" href="#__codelineno-0-365"></a><span class="p">)</span>
</span><span id="__span-0-366"><a id="__codelineno-0-366" name="__codelineno-0-366" href="#__codelineno-0-366"></a>
</span><span id="__span-0-367"><a id="__codelineno-0-367" name="__codelineno-0-367" href="#__codelineno-0-367"></a><span class="n">build_notes_list_instances</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-368"><a id="__codelineno-0-368" name="__codelineno-0-368" href="#__codelineno-0-368"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-0-369"><a id="__codelineno-0-369" name="__codelineno-0-369" href="#__codelineno-0-369"></a>    <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-0-370"><a id="__codelineno-0-370" name="__codelineno-0-370" href="#__codelineno-0-370"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;note&quot;</span>
</span><span id="__span-0-371"><a id="__codelineno-0-371" name="__codelineno-0-371" href="#__codelineno-0-371"></a>        <span class="ow">and</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;note_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;build_note&quot;</span>
</span><span id="__span-0-372"><a id="__codelineno-0-372" name="__codelineno-0-372" href="#__codelineno-0-372"></a>    <span class="p">):</span>
</span><span id="__span-0-373"><a id="__codelineno-0-373" name="__codelineno-0-373" href="#__codelineno-0-373"></a>        <span class="n">build_notes_list_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="__span-0-374"><a id="__codelineno-0-374" name="__codelineno-0-374" href="#__codelineno-0-374"></a>
</span><span id="__span-0-375"><a id="__codelineno-0-375" name="__codelineno-0-375" href="#__codelineno-0-375"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-376"><a id="__codelineno-0-376" name="__codelineno-0-376" href="#__codelineno-0-376"></a>    <span class="s2">&quot;build_notes_table&quot;</span><span class="p">,</span>
</span><span id="__span-0-377"><a id="__codelineno-0-377" name="__codelineno-0-377" href="#__codelineno-0-377"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-378"><a id="__codelineno-0-378" name="__codelineno-0-378" href="#__codelineno-0-378"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-379"><a id="__codelineno-0-379" name="__codelineno-0-379" href="#__codelineno-0-379"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;build_notes_table-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-380"><a id="__codelineno-0-380" name="__codelineno-0-380" href="#__codelineno-0-380"></a>    <span class="n">input_instances</span><span class="o">=</span><span class="n">build_notes_list_instances</span><span class="p">,</span>
</span><span id="__span-0-381"><a id="__codelineno-0-381" name="__codelineno-0-381" href="#__codelineno-0-381"></a><span class="p">)</span>
</span><span id="__span-0-382"><a id="__codelineno-0-382" name="__codelineno-0-382" href="#__codelineno-0-382"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-0-383"><a id="__codelineno-0-383" name="__codelineno-0-383" href="#__codelineno-0-383"></a>    <span class="s2">&quot;pdf_generator&quot;</span><span class="p">,</span>
</span><span id="__span-0-384"><a id="__codelineno-0-384" name="__codelineno-0-384" href="#__codelineno-0-384"></a>    <span class="s2">&quot;harness_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-0-385"><a id="__codelineno-0-385" name="__codelineno-0-385" href="#__codelineno-0-385"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-0-386"><a id="__codelineno-0-386" name="__codelineno-0-386" href="#__codelineno-0-386"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;pdf_drawing-1&quot;</span><span class="p">,</span>
</span><span id="__span-0-387"><a id="__codelineno-0-387" name="__codelineno-0-387" href="#__codelineno-0-387"></a>    <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
</span><span id="__span-0-388"><a id="__codelineno-0-388" name="__codelineno-0-388" href="#__codelineno-0-388"></a><span class="p">)</span>
</span><span id="__span-0-389"><a id="__codelineno-0-389" name="__codelineno-0-389" href="#__codelineno-0-389"></a>
</span><span id="__span-0-390"><a id="__codelineno-0-390" name="__codelineno-0-390" href="#__codelineno-0-390"></a><span class="p">{</span><span class="n">push_block</span><span class="p">}</span>
</span><span id="__span-0-391"><a id="__codelineno-0-391" name="__codelineno-0-391" href="#__codelineno-0-391"></a>
</span><span id="__span-0-392"><a id="__codelineno-0-392" name="__codelineno-0-392" href="#__codelineno-0-392"></a><span class="c1"># for convenience, move any pdf to the base directory of the harness</span>
</span><span id="__span-0-393"><a id="__codelineno-0-393" name="__codelineno-0-393" href="#__codelineno-0-393"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">copy_pdfs_to_cwd</span><span class="p">()</span>
</span></code></pre></div>
</details>
<details class="note">
<summary>Default system feature tree </summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice</span><span class="w"> </span><span class="kn">import</span> <span class="n">fileio</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">system_utils</span><span class="p">,</span> <span class="n">feature_tree_utils</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice.lists</span><span class="w"> </span><span class="kn">import</span> <span class="n">instances_list</span><span class="p">,</span> <span class="n">manifest</span><span class="p">,</span> <span class="n">channel_map</span><span class="p">,</span> <span class="n">circuits_list</span><span class="p">,</span> <span class="n">disconnect_map</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1">#                   KICAD PROCESSING</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span><span class="s2">&quot;kicad_pro_to_bom&quot;</span><span class="p">,</span> <span class="s2">&quot;system_builder&quot;</span><span class="p">,</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span> <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;bom-1&quot;</span><span class="p">)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1">#                   COLLECT AND PULL DEVICES FROM LIBRARY</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="n">system_utils</span><span class="o">.</span><span class="n">make_instances_from_bom</span><span class="p">()</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="c1">#                   CHANNEL MAPPING</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    <span class="s2">&quot;kicad_pro_to_system_connector_list&quot;</span><span class="p">,</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>    <span class="s2">&quot;system_builder&quot;</span><span class="p">,</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;system-connector-list-1&quot;</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="p">)</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="n">manifest</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="n">channel_map</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="c1">#add manual channel map commands here. key=(from_device_refdes, from_device_channel_id)</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="c1">#channel_map.map((&quot;MIC3&quot;, &quot;out1&quot;), (&quot;PREAMP1&quot;, &quot;in2&quot;))</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="c1">#map channels to other compatible channels by sorting alphabetically then mapping compatibles</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>    <span class="s2">&quot;basic_channel_mapper&quot;</span><span class="p">,</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>    <span class="s2">&quot;system_builder&quot;</span><span class="p">,</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;channel-mapper-1&quot;</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="p">)</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="c1">#if mapped channels must connect via disconnects, add the list of disconnects to the channel map</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="n">system_utils</span><span class="o">.</span><span class="n">add_chains_to_channel_map</span><span class="p">()</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="c1">#map channels that must pass through disconnects to available channels inside disconnects</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="n">disconnect_map</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="c1">#add manual disconnect map commands here</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="c1">#disconnect_map.already_assigned_disconnects_set_append((&#39;X1&#39;, &#39;ch0&#39;))</span>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a><span class="c1">#map channels passing through disconnects to available channels inside disconnects</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a>    <span class="s2">&quot;disconnect_mapper&quot;</span><span class="p">,</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a>    <span class="s2">&quot;system_builder&quot;</span><span class="p">,</span>
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;disconnect-mapper-1&quot;</span>
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a><span class="p">)</span>
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a>
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a><span class="c1"># ensure channels that are required to be mapped through disconnects are in fact done so</span>
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a><span class="n">disconnect_map</span><span class="o">.</span><span class="n">ensure_requirements_met</span><span class="p">()</span>
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a>
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a><span class="c1">#process channel and disconnect maps to make a list of every circuit in your system</span>
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a><span class="n">circuits_list</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="__span-1-60"><a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a>
</span><span id="__span-1-61"><a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-62"><a id="__codelineno-1-62" name="__codelineno-1-62" href="#__codelineno-1-62"></a><span class="c1">#                   INSTANCES LIST</span>
</span><span id="__span-1-63"><a id="__codelineno-1-63" name="__codelineno-1-63" href="#__codelineno-1-63"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-64"><a id="__codelineno-1-64" name="__codelineno-1-64" href="#__codelineno-1-64"></a><span class="n">system_utils</span><span class="o">.</span><span class="n">make_instances_for_connectors_cavities_nodes_channels_circuits</span><span class="p">()</span>
</span><span id="__span-1-65"><a id="__codelineno-1-65" name="__codelineno-1-65" href="#__codelineno-1-65"></a>
</span><span id="__span-1-66"><a id="__codelineno-1-66" name="__codelineno-1-66" href="#__codelineno-1-66"></a><span class="c1"># assign mating connectors</span>
</span><span id="__span-1-67"><a id="__codelineno-1-67" name="__codelineno-1-67" href="#__codelineno-1-67"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-1-68"><a id="__codelineno-1-68" name="__codelineno-1-68" href="#__codelineno-1-68"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;connector&quot;</span><span class="p">:</span>
</span><span id="__span-1-69"><a id="__codelineno-1-69" name="__codelineno-1-69" href="#__codelineno-1-69"></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_instance_mating_device_connector_mpn&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;XLR3M&quot;</span><span class="p">:</span>
</span><span id="__span-1-70"><a id="__codelineno-1-70" name="__codelineno-1-70" href="#__codelineno-1-70"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-1-71"><a id="__codelineno-1-71" name="__codelineno-1-71" href="#__codelineno-1-71"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-72"><a id="__codelineno-1-72" name="__codelineno-1-72" href="#__codelineno-1-72"></a>                <span class="p">{</span>
</span><span id="__span-1-73"><a id="__codelineno-1-73" name="__codelineno-1-73" href="#__codelineno-1-73"></a>                    <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;D38999_26ZA98PN&quot;</span><span class="p">,</span>
</span><span id="__span-1-74"><a id="__codelineno-1-74" name="__codelineno-1-74" href="#__codelineno-1-74"></a>                    <span class="s2">&quot;lib_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-75"><a id="__codelineno-1-75" name="__codelineno-1-75" href="#__codelineno-1-75"></a>                <span class="p">},</span>
</span><span id="__span-1-76"><a id="__codelineno-1-76" name="__codelineno-1-76" href="#__codelineno-1-76"></a>            <span class="p">)</span>
</span><span id="__span-1-77"><a id="__codelineno-1-77" name="__codelineno-1-77" href="#__codelineno-1-77"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_instance_mating_device_connector_mpn&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;XLR3F&quot;</span><span class="p">:</span>
</span><span id="__span-1-78"><a id="__codelineno-1-78" name="__codelineno-1-78" href="#__codelineno-1-78"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-1-79"><a id="__codelineno-1-79" name="__codelineno-1-79" href="#__codelineno-1-79"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-80"><a id="__codelineno-1-80" name="__codelineno-1-80" href="#__codelineno-1-80"></a>                <span class="p">{</span>
</span><span id="__span-1-81"><a id="__codelineno-1-81" name="__codelineno-1-81" href="#__codelineno-1-81"></a>                    <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;D38999_26ZB98PN&quot;</span><span class="p">,</span>
</span><span id="__span-1-82"><a id="__codelineno-1-82" name="__codelineno-1-82" href="#__codelineno-1-82"></a>                    <span class="s2">&quot;lib_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-83"><a id="__codelineno-1-83" name="__codelineno-1-83" href="#__codelineno-1-83"></a>                <span class="p">},</span>
</span><span id="__span-1-84"><a id="__codelineno-1-84" name="__codelineno-1-84" href="#__codelineno-1-84"></a>            <span class="p">)</span>
</span><span id="__span-1-85"><a id="__codelineno-1-85" name="__codelineno-1-85" href="#__codelineno-1-85"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_instance_mating_device_connector_mpn&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;DB25M&quot;</span><span class="p">:</span>
</span><span id="__span-1-86"><a id="__codelineno-1-86" name="__codelineno-1-86" href="#__codelineno-1-86"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-1-87"><a id="__codelineno-1-87" name="__codelineno-1-87" href="#__codelineno-1-87"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-88"><a id="__codelineno-1-88" name="__codelineno-1-88" href="#__codelineno-1-88"></a>                <span class="p">{</span>
</span><span id="__span-1-89"><a id="__codelineno-1-89" name="__codelineno-1-89" href="#__codelineno-1-89"></a>                    <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;D38999_26ZC35PN&quot;</span><span class="p">,</span>
</span><span id="__span-1-90"><a id="__codelineno-1-90" name="__codelineno-1-90" href="#__codelineno-1-90"></a>                    <span class="s2">&quot;lib_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-91"><a id="__codelineno-1-91" name="__codelineno-1-91" href="#__codelineno-1-91"></a>                <span class="p">},</span>
</span><span id="__span-1-92"><a id="__codelineno-1-92" name="__codelineno-1-92" href="#__codelineno-1-92"></a>            <span class="p">)</span>
</span><span id="__span-1-93"><a id="__codelineno-1-93" name="__codelineno-1-93" href="#__codelineno-1-93"></a>        <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_instance_mating_device_connector_mpn&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;DB25F&quot;</span><span class="p">:</span>
</span><span id="__span-1-94"><a id="__codelineno-1-94" name="__codelineno-1-94" href="#__codelineno-1-94"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-1-95"><a id="__codelineno-1-95" name="__codelineno-1-95" href="#__codelineno-1-95"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-96"><a id="__codelineno-1-96" name="__codelineno-1-96" href="#__codelineno-1-96"></a>                <span class="p">{</span>
</span><span id="__span-1-97"><a id="__codelineno-1-97" name="__codelineno-1-97" href="#__codelineno-1-97"></a>                    <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;D38999_26ZE6PN&quot;</span><span class="p">,</span>
</span><span id="__span-1-98"><a id="__codelineno-1-98" name="__codelineno-1-98" href="#__codelineno-1-98"></a>                    <span class="s2">&quot;lib_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-99"><a id="__codelineno-1-99" name="__codelineno-1-99" href="#__codelineno-1-99"></a>                <span class="p">},</span>
</span><span id="__span-1-100"><a id="__codelineno-1-100" name="__codelineno-1-100" href="#__codelineno-1-100"></a>            <span class="p">)</span>
</span><span id="__span-1-101"><a id="__codelineno-1-101" name="__codelineno-1-101" href="#__codelineno-1-101"></a>
</span><span id="__span-1-102"><a id="__codelineno-1-102" name="__codelineno-1-102" href="#__codelineno-1-102"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-103"><a id="__codelineno-1-103" name="__codelineno-1-103" href="#__codelineno-1-103"></a><span class="c1">#                   ASSIGN CONDUCTORS</span>
</span><span id="__span-1-104"><a id="__codelineno-1-104" name="__codelineno-1-104" href="#__codelineno-1-104"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-105"><a id="__codelineno-1-105" name="__codelineno-1-105" href="#__codelineno-1-105"></a>
</span><span id="__span-1-106"><a id="__codelineno-1-106" name="__codelineno-1-106" href="#__codelineno-1-106"></a><span class="c1"># add one conductor per circuit</span>
</span><span id="__span-1-107"><a id="__codelineno-1-107" name="__codelineno-1-107" href="#__codelineno-1-107"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-1-108"><a id="__codelineno-1-108" name="__codelineno-1-108" href="#__codelineno-1-108"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;circuit&quot;</span><span class="p">:</span>
</span><span id="__span-1-109"><a id="__codelineno-1-109" name="__codelineno-1-109" href="#__codelineno-1-109"></a>        <span class="n">circuit_id</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;circuit_id&quot;</span><span class="p">)</span>
</span><span id="__span-1-110"><a id="__codelineno-1-110" name="__codelineno-1-110" href="#__codelineno-1-110"></a>        <span class="n">conductor_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;conductor-</span><span class="si">{</span><span class="n">circuit_id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-1-111"><a id="__codelineno-1-111" name="__codelineno-1-111" href="#__codelineno-1-111"></a>        <span class="n">instances_list</span><span class="o">.</span><span class="n">new_instance</span><span class="p">(</span>
</span><span id="__span-1-112"><a id="__codelineno-1-112" name="__codelineno-1-112" href="#__codelineno-1-112"></a>            <span class="n">conductor_name</span><span class="p">,</span>
</span><span id="__span-1-113"><a id="__codelineno-1-113" name="__codelineno-1-113" href="#__codelineno-1-113"></a>            <span class="p">{</span>
</span><span id="__span-1-114"><a id="__codelineno-1-114" name="__codelineno-1-114" href="#__codelineno-1-114"></a>                <span class="s2">&quot;net&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;net&quot;</span><span class="p">),</span>
</span><span id="__span-1-115"><a id="__codelineno-1-115" name="__codelineno-1-115" href="#__codelineno-1-115"></a>                <span class="s2">&quot;item_type&quot;</span><span class="p">:</span> <span class="s2">&quot;conductor&quot;</span><span class="p">,</span>
</span><span id="__span-1-116"><a id="__codelineno-1-116" name="__codelineno-1-116" href="#__codelineno-1-116"></a>                <span class="s2">&quot;location_type&quot;</span><span class="p">:</span> <span class="s2">&quot;segment&quot;</span><span class="p">,</span>
</span><span id="__span-1-117"><a id="__codelineno-1-117" name="__codelineno-1-117" href="#__codelineno-1-117"></a>                <span class="s2">&quot;channel_group&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;channel_group&quot;</span><span class="p">),</span>
</span><span id="__span-1-118"><a id="__codelineno-1-118" name="__codelineno-1-118" href="#__codelineno-1-118"></a>                <span class="s2">&quot;node_at_end_a&quot;</span><span class="p">:</span> <span class="n">circuit_utils</span><span class="o">.</span><span class="n">instance_of_circuit_port_number</span><span class="p">(</span>
</span><span id="__span-1-119"><a id="__codelineno-1-119" name="__codelineno-1-119" href="#__codelineno-1-119"></a>                    <span class="n">circuit_id</span><span class="p">,</span> <span class="mi">0</span> <span class="c1"># assume the only existing ports at this point are cavities at 0 and 1</span>
</span><span id="__span-1-120"><a id="__codelineno-1-120" name="__codelineno-1-120" href="#__codelineno-1-120"></a>                <span class="p">),</span>
</span><span id="__span-1-121"><a id="__codelineno-1-121" name="__codelineno-1-121" href="#__codelineno-1-121"></a>                <span class="s2">&quot;node_at_end_b&quot;</span><span class="p">:</span> <span class="n">circuit_utils</span><span class="o">.</span><span class="n">instance_of_circuit_port_number</span><span class="p">(</span>
</span><span id="__span-1-122"><a id="__codelineno-1-122" name="__codelineno-1-122" href="#__codelineno-1-122"></a>                    <span class="n">circuit_id</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="__span-1-123"><a id="__codelineno-1-123" name="__codelineno-1-123" href="#__codelineno-1-123"></a>                <span class="p">),</span>
</span><span id="__span-1-124"><a id="__codelineno-1-124" name="__codelineno-1-124" href="#__codelineno-1-124"></a>                <span class="s2">&quot;this_channel_from_channel_type&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_channel_from_channel_type&quot;</span><span class="p">),</span>
</span><span id="__span-1-125"><a id="__codelineno-1-125" name="__codelineno-1-125" href="#__codelineno-1-125"></a>                <span class="s2">&quot;this_channel_to_channel_type&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_channel_to_channel_type&quot;</span><span class="p">),</span>
</span><span id="__span-1-126"><a id="__codelineno-1-126" name="__codelineno-1-126" href="#__codelineno-1-126"></a>                <span class="s2">&quot;signal_of_channel_type&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signal_of_channel_type&quot;</span><span class="p">)</span>
</span><span id="__span-1-127"><a id="__codelineno-1-127" name="__codelineno-1-127" href="#__codelineno-1-127"></a>            <span class="p">},</span>
</span><span id="__span-1-128"><a id="__codelineno-1-128" name="__codelineno-1-128" href="#__codelineno-1-128"></a>        <span class="p">)</span>
</span><span id="__span-1-129"><a id="__codelineno-1-129" name="__codelineno-1-129" href="#__codelineno-1-129"></a>        <span class="n">circuit_utils</span><span class="o">.</span><span class="n">squeeze_instance_between_ports_in_circuit</span><span class="p">(</span>
</span><span id="__span-1-130"><a id="__codelineno-1-130" name="__codelineno-1-130" href="#__codelineno-1-130"></a>            <span class="n">conductor_name</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;circuit_id&quot;</span><span class="p">),</span> <span class="mi">1</span>
</span><span id="__span-1-131"><a id="__codelineno-1-131" name="__codelineno-1-131" href="#__codelineno-1-131"></a>        <span class="p">)</span>
</span><span id="__span-1-132"><a id="__codelineno-1-132" name="__codelineno-1-132" href="#__codelineno-1-132"></a>
</span><span id="__span-1-133"><a id="__codelineno-1-133" name="__codelineno-1-133" href="#__codelineno-1-133"></a><span class="c1"># define the cable types we want to use here</span>
</span><span id="__span-1-134"><a id="__codelineno-1-134" name="__codelineno-1-134" href="#__codelineno-1-134"></a><span class="n">audio_cable</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-1-135"><a id="__codelineno-1-135" name="__codelineno-1-135" href="#__codelineno-1-135"></a>    <span class="s2">&quot;lib_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-136"><a id="__codelineno-1-136" name="__codelineno-1-136" href="#__codelineno-1-136"></a>    <span class="s2">&quot;mpn&quot;</span><span class="p">:</span> <span class="s2">&quot;8762 0602000&quot;</span><span class="p">,</span>
</span><span id="__span-1-137"><a id="__codelineno-1-137" name="__codelineno-1-137" href="#__codelineno-1-137"></a>    <span class="s2">&quot;lib_subpath&quot;</span><span class="p">:</span> <span class="s2">&quot;belden&quot;</span><span class="p">,</span>
</span><span id="__span-1-138"><a id="__codelineno-1-138" name="__codelineno-1-138" href="#__codelineno-1-138"></a><span class="p">}</span>
</span><span id="__span-1-139"><a id="__codelineno-1-139" name="__codelineno-1-139" href="#__codelineno-1-139"></a>
</span><span id="__span-1-140"><a id="__codelineno-1-140" name="__codelineno-1-140" href="#__codelineno-1-140"></a><span class="c1"># assign conductors to cable-id</span>
</span><span id="__span-1-141"><a id="__codelineno-1-141" name="__codelineno-1-141" href="#__codelineno-1-141"></a><span class="n">cable_id_counter</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-1-142"><a id="__codelineno-1-142" name="__codelineno-1-142" href="#__codelineno-1-142"></a><span class="n">instances</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">)</span>
</span><span id="__span-1-143"><a id="__codelineno-1-143" name="__codelineno-1-143" href="#__codelineno-1-143"></a><span class="k">for</span> <span class="n">net</span> <span class="ow">in</span> <span class="n">instances_list</span><span class="o">.</span><span class="n">list_of_uniques</span><span class="p">(</span><span class="s2">&quot;net&quot;</span><span class="p">):</span>
</span><span id="__span-1-144"><a id="__codelineno-1-144" name="__codelineno-1-144" href="#__codelineno-1-144"></a>    <span class="k">for</span> <span class="n">chgroup</span> <span class="ow">in</span> <span class="n">instances_list</span><span class="o">.</span><span class="n">list_of_uniques</span><span class="p">(</span><span class="s2">&quot;channel_group&quot;</span><span class="p">):</span>
</span><span id="__span-1-145"><a id="__codelineno-1-145" name="__codelineno-1-145" href="#__codelineno-1-145"></a>        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span><span id="__span-1-146"><a id="__codelineno-1-146" name="__codelineno-1-146" href="#__codelineno-1-146"></a>            <span class="n">cable_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;cable-</span><span class="si">{</span><span class="n">cable_id_counter</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-1-147"><a id="__codelineno-1-147" name="__codelineno-1-147" href="#__codelineno-1-147"></a>
</span><span id="__span-1-148"><a id="__codelineno-1-148" name="__codelineno-1-148" href="#__codelineno-1-148"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;net&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">net</span><span class="p">:</span>
</span><span id="__span-1-149"><a id="__codelineno-1-149" name="__codelineno-1-149" href="#__codelineno-1-149"></a>                <span class="k">continue</span>
</span><span id="__span-1-150"><a id="__codelineno-1-150" name="__codelineno-1-150" href="#__codelineno-1-150"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;channel_group&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">chgroup</span><span class="p">:</span>
</span><span id="__span-1-151"><a id="__codelineno-1-151" name="__codelineno-1-151" href="#__codelineno-1-151"></a>                <span class="k">continue</span>
</span><span id="__span-1-152"><a id="__codelineno-1-152" name="__codelineno-1-152" href="#__codelineno-1-152"></a>            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;conductor&quot;</span><span class="p">:</span>
</span><span id="__span-1-153"><a id="__codelineno-1-153" name="__codelineno-1-153" href="#__codelineno-1-153"></a>                <span class="k">continue</span>
</span><span id="__span-1-154"><a id="__codelineno-1-154" name="__codelineno-1-154" href="#__codelineno-1-154"></a>
</span><span id="__span-1-155"><a id="__codelineno-1-155" name="__codelineno-1-155" href="#__codelineno-1-155"></a>            <span class="k">if</span> <span class="n">chtype</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_channel_from_channel_type&quot;</span><span class="p">))</span> <span class="ow">in</span> <span class="n">chtype</span><span class="o">.</span><span class="n">is_or_is_compatible_with</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;https://github.com/harnice/harnice&#39;</span><span class="p">)):</span>
</span><span id="__span-1-156"><a id="__codelineno-1-156" name="__codelineno-1-156" href="#__codelineno-1-156"></a>                <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signal_of_channel_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;pos&quot;</span><span class="p">]:</span>
</span><span id="__span-1-157"><a id="__codelineno-1-157" name="__codelineno-1-157" href="#__codelineno-1-157"></a>                    <span class="n">circuit_utils</span><span class="o">.</span><span class="n">assign_cable_conductor</span><span class="p">(</span>
</span><span id="__span-1-158"><a id="__codelineno-1-158" name="__codelineno-1-158" href="#__codelineno-1-158"></a>                        <span class="n">cable_name</span><span class="p">,</span>
</span><span id="__span-1-159"><a id="__codelineno-1-159" name="__codelineno-1-159" href="#__codelineno-1-159"></a>                        <span class="p">(</span><span class="s2">&quot;pair_1&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">),</span>
</span><span id="__span-1-160"><a id="__codelineno-1-160" name="__codelineno-1-160" href="#__codelineno-1-160"></a>                        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-161"><a id="__codelineno-1-161" name="__codelineno-1-161" href="#__codelineno-1-161"></a>                        <span class="n">audio_cable</span><span class="p">,</span>
</span><span id="__span-1-162"><a id="__codelineno-1-162" name="__codelineno-1-162" href="#__codelineno-1-162"></a>                        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;net&quot;</span><span class="p">)</span>
</span><span id="__span-1-163"><a id="__codelineno-1-163" name="__codelineno-1-163" href="#__codelineno-1-163"></a>                    <span class="p">)</span>
</span><span id="__span-1-164"><a id="__codelineno-1-164" name="__codelineno-1-164" href="#__codelineno-1-164"></a>                <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signal_of_channel_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;neg&quot;</span><span class="p">]:</span>
</span><span id="__span-1-165"><a id="__codelineno-1-165" name="__codelineno-1-165" href="#__codelineno-1-165"></a>                    <span class="n">circuit_utils</span><span class="o">.</span><span class="n">assign_cable_conductor</span><span class="p">(</span>
</span><span id="__span-1-166"><a id="__codelineno-1-166" name="__codelineno-1-166" href="#__codelineno-1-166"></a>                        <span class="n">cable_name</span><span class="p">,</span>
</span><span id="__span-1-167"><a id="__codelineno-1-167" name="__codelineno-1-167" href="#__codelineno-1-167"></a>                        <span class="p">(</span><span class="s2">&quot;pair_1&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">),</span>
</span><span id="__span-1-168"><a id="__codelineno-1-168" name="__codelineno-1-168" href="#__codelineno-1-168"></a>                        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-169"><a id="__codelineno-1-169" name="__codelineno-1-169" href="#__codelineno-1-169"></a>                        <span class="n">audio_cable</span><span class="p">,</span>
</span><span id="__span-1-170"><a id="__codelineno-1-170" name="__codelineno-1-170" href="#__codelineno-1-170"></a>                        <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;net&quot;</span><span class="p">)</span>
</span><span id="__span-1-171"><a id="__codelineno-1-171" name="__codelineno-1-171" href="#__codelineno-1-171"></a>                    <span class="p">)</span>
</span><span id="__span-1-172"><a id="__codelineno-1-172" name="__codelineno-1-172" href="#__codelineno-1-172"></a>        <span class="n">cable_id_counter</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># in this system, each channel gets its own cable.</span>
</span><span id="__span-1-173"><a id="__codelineno-1-173" name="__codelineno-1-173" href="#__codelineno-1-173"></a>
</span><span id="__span-1-174"><a id="__codelineno-1-174" name="__codelineno-1-174" href="#__codelineno-1-174"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-175"><a id="__codelineno-1-175" name="__codelineno-1-175" href="#__codelineno-1-175"></a><span class="c1">#                   SYSTEM DESIGN CHECKS</span>
</span><span id="__span-1-176"><a id="__codelineno-1-176" name="__codelineno-1-176" href="#__codelineno-1-176"></a><span class="c1">#===========================================================================</span>
</span><span id="__span-1-177"><a id="__codelineno-1-177" name="__codelineno-1-177" href="#__codelineno-1-177"></a><span class="n">connector_list</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;system connector list&quot;</span><span class="p">)</span>
</span><span id="__span-1-178"><a id="__codelineno-1-178" name="__codelineno-1-178" href="#__codelineno-1-178"></a><span class="n">circuits_list</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;circuits list&quot;</span><span class="p">)</span>
</span><span id="__span-1-179"><a id="__codelineno-1-179" name="__codelineno-1-179" href="#__codelineno-1-179"></a>
</span><span id="__span-1-180"><a id="__codelineno-1-180" name="__codelineno-1-180" href="#__codelineno-1-180"></a><span class="c1">#check for circuits with no connectors</span>
</span><span id="__span-1-181"><a id="__codelineno-1-181" name="__codelineno-1-181" href="#__codelineno-1-181"></a><span class="n">system_utils</span><span class="o">.</span><span class="n">find_connector_with_no_circuit</span><span class="p">(</span><span class="n">connector_list</span><span class="p">,</span> <span class="n">circuits_list</span><span class="p">)</span>
</span><span id="__span-1-182"><a id="__codelineno-1-182" name="__codelineno-1-182" href="#__codelineno-1-182"></a>
</span><span id="__span-1-183"><a id="__codelineno-1-183" name="__codelineno-1-183" href="#__codelineno-1-183"></a>
</span><span id="__span-1-184"><a id="__codelineno-1-184" name="__codelineno-1-184" href="#__codelineno-1-184"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-185"><a id="__codelineno-1-185" name="__codelineno-1-185" href="#__codelineno-1-185"></a><span class="c1">#                   ADD STYLING AND PRINT NAMES TO CHANNELS</span>
</span><span id="__span-1-186"><a id="__codelineno-1-186" name="__codelineno-1-186" href="#__codelineno-1-186"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-187"><a id="__codelineno-1-187" name="__codelineno-1-187" href="#__codelineno-1-187"></a><span class="c1"># assign styling to channels</span>
</span><span id="__span-1-188"><a id="__codelineno-1-188" name="__codelineno-1-188" href="#__codelineno-1-188"></a><span class="n">audio_channel_style</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-1-189"><a id="__codelineno-1-189" name="__codelineno-1-189" href="#__codelineno-1-189"></a>    <span class="s2">&quot;base_color&quot;</span><span class="p">:</span> <span class="s2">&quot;#D59A10&quot;</span><span class="p">,</span>
</span><span id="__span-1-190"><a id="__codelineno-1-190" name="__codelineno-1-190" href="#__codelineno-1-190"></a><span class="p">}</span>
</span><span id="__span-1-191"><a id="__codelineno-1-191" name="__codelineno-1-191" href="#__codelineno-1-191"></a><span class="n">shield_channel_style</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-1-192"><a id="__codelineno-1-192" name="__codelineno-1-192" href="#__codelineno-1-192"></a>    <span class="s2">&quot;base_color&quot;</span><span class="p">:</span> <span class="s2">&quot;#4039A1&quot;</span><span class="p">,</span>
</span><span id="__span-1-193"><a id="__codelineno-1-193" name="__codelineno-1-193" href="#__codelineno-1-193"></a><span class="p">}</span>
</span><span id="__span-1-194"><a id="__codelineno-1-194" name="__codelineno-1-194" href="#__codelineno-1-194"></a>
</span><span id="__span-1-195"><a id="__codelineno-1-195" name="__codelineno-1-195" href="#__codelineno-1-195"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-1-196"><a id="__codelineno-1-196" name="__codelineno-1-196" href="#__codelineno-1-196"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="s2">&quot;net-channel&quot;</span><span class="p">]:</span>
</span><span id="__span-1-197"><a id="__codelineno-1-197" name="__codelineno-1-197" href="#__codelineno-1-197"></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_channel_from_channel_type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;(1, &#39;https://github.com/harnice/harnice&#39;)&quot;</span><span class="p">,</span> <span class="s2">&quot;(2, &#39;https://github.com/harnice/harnice&#39;)&quot;</span><span class="p">]:</span>
</span><span id="__span-1-198"><a id="__codelineno-1-198" name="__codelineno-1-198" href="#__codelineno-1-198"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-1-199"><a id="__codelineno-1-199" name="__codelineno-1-199" href="#__codelineno-1-199"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-200"><a id="__codelineno-1-200" name="__codelineno-1-200" href="#__codelineno-1-200"></a>                <span class="p">{</span>
</span><span id="__span-1-201"><a id="__codelineno-1-201" name="__codelineno-1-201" href="#__codelineno-1-201"></a>                    <span class="s2">&quot;appearance&quot;</span><span class="p">:</span> <span class="n">audio_channel_style</span>
</span><span id="__span-1-202"><a id="__codelineno-1-202" name="__codelineno-1-202" href="#__codelineno-1-202"></a>                <span class="p">}</span>
</span><span id="__span-1-203"><a id="__codelineno-1-203" name="__codelineno-1-203" href="#__codelineno-1-203"></a>            <span class="p">)</span>
</span><span id="__span-1-204"><a id="__codelineno-1-204" name="__codelineno-1-204" href="#__codelineno-1-204"></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_channel_from_channel_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;(5, &#39;https://github.com/harnice/harnice&#39;)&quot;</span><span class="p">:</span>
</span><span id="__span-1-205"><a id="__codelineno-1-205" name="__codelineno-1-205" href="#__codelineno-1-205"></a>            <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
</span><span id="__span-1-206"><a id="__codelineno-1-206" name="__codelineno-1-206" href="#__codelineno-1-206"></a>                <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span>
</span><span id="__span-1-207"><a id="__codelineno-1-207" name="__codelineno-1-207" href="#__codelineno-1-207"></a>                <span class="p">{</span>
</span><span id="__span-1-208"><a id="__codelineno-1-208" name="__codelineno-1-208" href="#__codelineno-1-208"></a>                    <span class="s2">&quot;appearance&quot;</span><span class="p">:</span> <span class="n">shield_channel_style</span>
</span><span id="__span-1-209"><a id="__codelineno-1-209" name="__codelineno-1-209" href="#__codelineno-1-209"></a>                <span class="p">}</span>
</span><span id="__span-1-210"><a id="__codelineno-1-210" name="__codelineno-1-210" href="#__codelineno-1-210"></a>            <span class="p">)</span>
</span><span id="__span-1-211"><a id="__codelineno-1-211" name="__codelineno-1-211" href="#__codelineno-1-211"></a>
</span><span id="__span-1-212"><a id="__codelineno-1-212" name="__codelineno-1-212" href="#__codelineno-1-212"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-1-213"><a id="__codelineno-1-213" name="__codelineno-1-213" href="#__codelineno-1-213"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;net-channel&quot;</span><span class="p">:</span>
</span><span id="__span-1-214"><a id="__codelineno-1-214" name="__codelineno-1-214" href="#__codelineno-1-214"></a>        <span class="n">instances_list</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_name&quot;</span><span class="p">),</span> <span class="p">{</span>
</span><span id="__span-1-215"><a id="__codelineno-1-215" name="__codelineno-1-215" href="#__codelineno-1-215"></a>            <span class="s2">&quot;print_name_at_end_a&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_net_from_device_channel_id&quot;</span><span class="p">),</span>
</span><span id="__span-1-216"><a id="__codelineno-1-216" name="__codelineno-1-216" href="#__codelineno-1-216"></a>            <span class="s2">&quot;print_name_at_end_b&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;this_net_to_device_channel_id&quot;</span><span class="p">)</span>
</span><span id="__span-1-217"><a id="__codelineno-1-217" name="__codelineno-1-217" href="#__codelineno-1-217"></a>        <span class="p">})</span>
</span><span id="__span-1-218"><a id="__codelineno-1-218" name="__codelineno-1-218" href="#__codelineno-1-218"></a>
</span><span id="__span-1-219"><a id="__codelineno-1-219" name="__codelineno-1-219" href="#__codelineno-1-219"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-220"><a id="__codelineno-1-220" name="__codelineno-1-220" href="#__codelineno-1-220"></a><span class="c1">#                   SYSTEM ARTIFACT GENERATORS</span>
</span><span id="__span-1-221"><a id="__codelineno-1-221" name="__codelineno-1-221" href="#__codelineno-1-221"></a><span class="c1"># ===========================================================================</span>
</span><span id="__span-1-222"><a id="__codelineno-1-222" name="__codelineno-1-222" href="#__codelineno-1-222"></a>
</span><span id="__span-1-223"><a id="__codelineno-1-223" name="__codelineno-1-223" href="#__codelineno-1-223"></a><span class="c1"># map channels passing through disconnects to available channels inside disconnects</span>
</span><span id="__span-1-224"><a id="__codelineno-1-224" name="__codelineno-1-224" href="#__codelineno-1-224"></a><span class="c1"># prepare the channel map block diagram overlay</span>
</span><span id="__span-1-225"><a id="__codelineno-1-225" name="__codelineno-1-225" href="#__codelineno-1-225"></a><span class="n">chmap_instances</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-1-226"><a id="__codelineno-1-226" name="__codelineno-1-226" href="#__codelineno-1-226"></a><span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">read_tsv</span><span class="p">(</span><span class="s2">&quot;instances list&quot;</span><span class="p">):</span>
</span><span id="__span-1-227"><a id="__codelineno-1-227" name="__codelineno-1-227" href="#__codelineno-1-227"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;net-channel&quot;</span><span class="p">:</span>
</span><span id="__span-1-228"><a id="__codelineno-1-228" name="__codelineno-1-228" href="#__codelineno-1-228"></a>        <span class="n">chmap_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="__span-1-229"><a id="__codelineno-1-229" name="__codelineno-1-229" href="#__codelineno-1-229"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">run_macro</span><span class="p">(</span>
</span><span id="__span-1-230"><a id="__codelineno-1-230" name="__codelineno-1-230" href="#__codelineno-1-230"></a>    <span class="s2">&quot;kicad_sch_net_overlay&quot;</span><span class="p">,</span>
</span><span id="__span-1-231"><a id="__codelineno-1-231" name="__codelineno-1-231" href="#__codelineno-1-231"></a>    <span class="s2">&quot;system_artifacts&quot;</span><span class="p">,</span>
</span><span id="__span-1-232"><a id="__codelineno-1-232" name="__codelineno-1-232" href="#__codelineno-1-232"></a>    <span class="s2">&quot;https://github.com/harnice/harnice&quot;</span><span class="p">,</span>
</span><span id="__span-1-233"><a id="__codelineno-1-233" name="__codelineno-1-233" href="#__codelineno-1-233"></a>    <span class="n">artifact_id</span><span class="o">=</span><span class="s2">&quot;blockdiagram-chmap-1&quot;</span><span class="p">,</span>
</span><span id="__span-1-234"><a id="__codelineno-1-234" name="__codelineno-1-234" href="#__codelineno-1-234"></a>    <span class="n">item_type</span><span class="o">=</span><span class="s2">&quot;net-channel&quot;</span><span class="p">,</span>
</span><span id="__span-1-235"><a id="__codelineno-1-235" name="__codelineno-1-235" href="#__codelineno-1-235"></a>    <span class="n">instances</span><span class="o">=</span><span class="n">chmap_instances</span>
</span><span id="__span-1-236"><a id="__codelineno-1-236" name="__codelineno-1-236" href="#__codelineno-1-236"></a><span class="p">)</span>
</span><span id="__span-1-237"><a id="__codelineno-1-237" name="__codelineno-1-237" href="#__codelineno-1-237"></a>
</span><span id="__span-1-238"><a id="__codelineno-1-238" name="__codelineno-1-238" href="#__codelineno-1-238"></a><span class="c1"># for convenience, move any pdf to the base directory of the harness</span>
</span><span id="__span-1-239"><a id="__codelineno-1-239" name="__codelineno-1-239" href="#__codelineno-1-239"></a><span class="n">feature_tree_utils</span><span class="o">.</span><span class="n">copy_pdfs_to_cwd</span><span class="p">()</span>
</span></code></pre></div>
</details>
<h1 id="instances-lists-signals-lists-product-as-designed"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H6.5V5Zm-13 1.5v7.75c0 .138.112.25.25.25H5v-8ZM5 5V1.5H1.75a.25.25 0 0 0-.25.25V5Z"/></svg></span> Instances Lists, Signals Lists <em>(product as-designed)</em></h1>
<p>While having a concise set of rules is important to the definition of a product, it is not always sufficient as complete digital representation of the product. There's a difference between "as-intended" (feature tree) vs "as-designed". Harnice produces "as-designed" documentation for products in various formats depending on the product, but the following is a core Harnice design requirement:</p>
<p><strong>There shall always be</strong>
<mark><strong>one single source-of-truth representing the as-designed product,</strong></mark> 
<strong>from which  all outputs or dependencies are derived.</strong></p>
<p>Here are the "as-designed" filetypes of each designable product:</p>
<table>
<thead>
<tr>
<th>Product</th>
<th>As-designed source of truth</th>
</tr>
</thead>
<tbody>
<tr>
<td>systems, harnesses</td>
<td><code>instances list</code></td>
</tr>
<tr>
<td>device, disconnect</td>
<td><code>signals list</code></td>
</tr>
</tbody>
</table>
<p><em>(the other products have more than one but I'm not sure how to defend why that's ok at time of writing)</em></p>
<p>More information about these:</p>
<details class="info">
<summary>Instances Lists</summary>
<h2 id="interacting-with-instances-lists">Interacting with Instances Lists</h2>
<p>An instances list is a list of every physical or notional item, idea, note, part, instruction, circuit, drawing element, thing, concept literally anything that describes how to build that harness or system.</p>
<p>Instances lists are the single comprehensive source of truth for the product you are working on. Other documents like the Feature Tree, etc, build this list, and all output documentation are derived from it.</p>
<hr />
<h2 id="columns">Columns</h2>
<p><em>Columns are automatically generated when <code>instances_list.new()</code> is called. Additional columns are not supported and may result in an error when parsing.</em></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:71"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><input id="__tabbed_1_10" name="__tabbed_1" type="radio" /><input id="__tabbed_1_11" name="__tabbed_1" type="radio" /><input id="__tabbed_1_12" name="__tabbed_1" type="radio" /><input id="__tabbed_1_13" name="__tabbed_1" type="radio" /><input id="__tabbed_1_14" name="__tabbed_1" type="radio" /><input id="__tabbed_1_15" name="__tabbed_1" type="radio" /><input id="__tabbed_1_16" name="__tabbed_1" type="radio" /><input id="__tabbed_1_17" name="__tabbed_1" type="radio" /><input id="__tabbed_1_18" name="__tabbed_1" type="radio" /><input id="__tabbed_1_19" name="__tabbed_1" type="radio" /><input id="__tabbed_1_20" name="__tabbed_1" type="radio" /><input id="__tabbed_1_21" name="__tabbed_1" type="radio" /><input id="__tabbed_1_22" name="__tabbed_1" type="radio" /><input id="__tabbed_1_23" name="__tabbed_1" type="radio" /><input id="__tabbed_1_24" name="__tabbed_1" type="radio" /><input id="__tabbed_1_25" name="__tabbed_1" type="radio" /><input id="__tabbed_1_26" name="__tabbed_1" type="radio" /><input id="__tabbed_1_27" name="__tabbed_1" type="radio" /><input id="__tabbed_1_28" name="__tabbed_1" type="radio" /><input id="__tabbed_1_29" name="__tabbed_1" type="radio" /><input id="__tabbed_1_30" name="__tabbed_1" type="radio" /><input id="__tabbed_1_31" name="__tabbed_1" type="radio" /><input id="__tabbed_1_32" name="__tabbed_1" type="radio" /><input id="__tabbed_1_33" name="__tabbed_1" type="radio" /><input id="__tabbed_1_34" name="__tabbed_1" type="radio" /><input id="__tabbed_1_35" name="__tabbed_1" type="radio" /><input id="__tabbed_1_36" name="__tabbed_1" type="radio" /><input id="__tabbed_1_37" name="__tabbed_1" type="radio" /><input id="__tabbed_1_38" name="__tabbed_1" type="radio" /><input id="__tabbed_1_39" name="__tabbed_1" type="radio" /><input id="__tabbed_1_40" name="__tabbed_1" type="radio" /><input id="__tabbed_1_41" name="__tabbed_1" type="radio" /><input id="__tabbed_1_42" name="__tabbed_1" type="radio" /><input id="__tabbed_1_43" name="__tabbed_1" type="radio" /><input id="__tabbed_1_44" name="__tabbed_1" type="radio" /><input id="__tabbed_1_45" name="__tabbed_1" type="radio" /><input id="__tabbed_1_46" name="__tabbed_1" type="radio" /><input id="__tabbed_1_47" name="__tabbed_1" type="radio" /><input id="__tabbed_1_48" name="__tabbed_1" type="radio" /><input id="__tabbed_1_49" name="__tabbed_1" type="radio" /><input id="__tabbed_1_50" name="__tabbed_1" type="radio" /><input id="__tabbed_1_51" name="__tabbed_1" type="radio" /><input id="__tabbed_1_52" name="__tabbed_1" type="radio" /><input id="__tabbed_1_53" name="__tabbed_1" type="radio" /><input id="__tabbed_1_54" name="__tabbed_1" type="radio" /><input id="__tabbed_1_55" name="__tabbed_1" type="radio" /><input id="__tabbed_1_56" name="__tabbed_1" type="radio" /><input id="__tabbed_1_57" name="__tabbed_1" type="radio" /><input id="__tabbed_1_58" name="__tabbed_1" type="radio" /><input id="__tabbed_1_59" name="__tabbed_1" type="radio" /><input id="__tabbed_1_60" name="__tabbed_1" type="radio" /><input id="__tabbed_1_61" name="__tabbed_1" type="radio" /><input id="__tabbed_1_62" name="__tabbed_1" type="radio" /><input id="__tabbed_1_63" name="__tabbed_1" type="radio" /><input id="__tabbed_1_64" name="__tabbed_1" type="radio" /><input id="__tabbed_1_65" name="__tabbed_1" type="radio" /><input id="__tabbed_1_66" name="__tabbed_1" type="radio" /><input id="__tabbed_1_67" name="__tabbed_1" type="radio" /><input id="__tabbed_1_68" name="__tabbed_1" type="radio" /><input id="__tabbed_1_69" name="__tabbed_1" type="radio" /><input id="__tabbed_1_70" name="__tabbed_1" type="radio" /><input id="__tabbed_1_71" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1"><code>net</code></label><label for="__tabbed_1_2"><code>instance_name</code></label><label for="__tabbed_1_3"><code>print_name</code></label><label for="__tabbed_1_4"><code>bom_line_number</code></label><label for="__tabbed_1_5"><code>mfg</code></label><label for="__tabbed_1_6"><code>mpn</code></label><label for="__tabbed_1_7"><code>item_type</code></label><label for="__tabbed_1_8"><code>parent_instance</code></label><label for="__tabbed_1_9"><code>location_type</code></label><label for="__tabbed_1_10"><code>segment_group</code></label><label for="__tabbed_1_11"><code>segment_order</code></label><label for="__tabbed_1_12"><code>connector_group</code></label><label for="__tabbed_1_13"><code>channel_group</code></label><label for="__tabbed_1_14"><code>circuit_id</code></label><label for="__tabbed_1_15"><code>circuit_port_number</code></label><label for="__tabbed_1_16"><code>node_at_end_a</code></label><label for="__tabbed_1_17"><code>node_at_end_b</code></label><label for="__tabbed_1_18"><code>print_name_at_end_a</code></label><label for="__tabbed_1_19"><code>print_name_at_end_b</code></label><label for="__tabbed_1_20"><code>parent_csys_instance_name</code></label><label for="__tabbed_1_21"><code>parent_csys_outputcsys_name</code></label><label for="__tabbed_1_22"><code>translate_x</code></label><label for="__tabbed_1_23"><code>translate_y</code></label><label for="__tabbed_1_24"><code>rotate_csys</code></label><label for="__tabbed_1_25"><code>absolute_rotation</code></label><label for="__tabbed_1_26"><code>csys_children</code></label><label for="__tabbed_1_27"><code>cable_group</code></label><label for="__tabbed_1_28"><code>cable_container</code></label><label for="__tabbed_1_29"><code>cable_identifier</code></label><label for="__tabbed_1_30"><code>length</code></label><label for="__tabbed_1_31"><code>length_tolerance</code></label><label for="__tabbed_1_32"><code>diameter</code></label><label for="__tabbed_1_33"><code>appearance</code></label><label for="__tabbed_1_34"><code>note_type</code></label><label for="__tabbed_1_35"><code>note_number</code></label><label for="__tabbed_1_36"><code>note_parent</code></label><label for="__tabbed_1_37"><code>note_text</code></label><label for="__tabbed_1_38"><code>note_affected_instances</code></label><label for="__tabbed_1_39"><code>lib_repo</code></label><label for="__tabbed_1_40"><code>lib_subpath</code></label><label for="__tabbed_1_41"><code>lib_desc</code></label><label for="__tabbed_1_42"><code>lib_latest_rev</code></label><label for="__tabbed_1_43"><code>lib_rev_used_here</code></label><label for="__tabbed_1_44"><code>lib_status</code></label><label for="__tabbed_1_45"><code>lib_releaseticket</code></label><label for="__tabbed_1_46"><code>lib_datestarted</code></label><label for="__tabbed_1_47"><code>lib_datemodified</code></label><label for="__tabbed_1_48"><code>lib_datereleased</code></label><label for="__tabbed_1_49"><code>lib_drawnby</code></label><label for="__tabbed_1_50"><code>lib_checkedby</code></label><label for="__tabbed_1_51"><code>project_editable_lib_modified</code></label><label for="__tabbed_1_52"><code>lib_build_notes</code></label><label for="__tabbed_1_53"><code>lib_tools</code></label><label for="__tabbed_1_54"><code>this_instance_mating_device_refdes</code></label><label for="__tabbed_1_55"><code>this_instance_mating_device_connector</code></label><label for="__tabbed_1_56"><code>this_instance_mating_device_connector_mpn</code></label><label for="__tabbed_1_57"><code>this_net_from_device_refdes</code></label><label for="__tabbed_1_58"><code>this_net_from_device_channel_id</code></label><label for="__tabbed_1_59"><code>this_net_from_device_connector_name</code></label><label for="__tabbed_1_60"><code>this_net_to_device_refdes</code></label><label for="__tabbed_1_61"><code>this_net_to_device_channel_id</code></label><label for="__tabbed_1_62"><code>this_net_to_device_connector_name</code></label><label for="__tabbed_1_63"><code>this_channel_from_device_refdes</code></label><label for="__tabbed_1_64"><code>this_channel_from_device_channel_id</code></label><label for="__tabbed_1_65"><code>this_channel_to_device_refdes</code></label><label for="__tabbed_1_66"><code>this_channel_to_device_channel_id</code></label><label for="__tabbed_1_67"><code>this_channel_from_channel_type</code></label><label for="__tabbed_1_68"><code>this_channel_to_channel_type</code></label><label for="__tabbed_1_69"><code>signal_of_channel_type</code></label><label for="__tabbed_1_70"><code>debug</code></label><label for="__tabbed_1_71"><code>debug_cutoff</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>the physical harness (represented by a net in Kicad) that this instance is part of</p>
</div>
<div class="tabbed-block">
<p>the unique name of this instance</p>
</div>
<div class="tabbed-block">
<p>the non-unique, human-readable name of this instance, used for printing on output documents</p>
</div>
<div class="tabbed-block">
<p>if this instance represents a physical procurable good, it gets assigned a line number on a bill of materials</p>
</div>
<div class="tabbed-block">
<p>manufacturer of this instance</p>
</div>
<div class="tabbed-block">
<p>manufacturer part number</p>
</div>
<div class="tabbed-block">
<p>connector, backshell, whatever</p>
</div>
<div class="tabbed-block">
<p>general purpose reference</p>
</div>
<div class="tabbed-block">
<p>each instance is either better represented by one or ther other</p>
</div>
<div class="tabbed-block">
<p>the group of segments that this instance is part of</p>
</div>
<div class="tabbed-block">
<p>the sequential id of this item in its segment group</p>
</div>
<div class="tabbed-block">
<p>a group of co-located parts (connectors, backshells, nodes)</p>
</div>
<div class="tabbed-block">
<p>other instances associated with this one because they are part of the same channel will share this value</p>
</div>
<div class="tabbed-block">
<p>which signal this component is electrically connected to</p>
</div>
<div class="tabbed-block">
<p>the sequential id of this item in its signal chain</p>
</div>
<div class="tabbed-block">
<p>derived from formboard definition</p>
</div>
<div class="tabbed-block">
<p>derived from formboard definition</p>
</div>
<div class="tabbed-block">
<p>human-readable name of this instance if needed, associated with 'node_at_end_a'</p>
</div>
<div class="tabbed-block">
<p>human-readable name of this instance if needed, associated with 'node_at_end_b'</p>
</div>
<div class="tabbed-block">
<p>the other instance upon which this instance's location is based</p>
</div>
<div class="tabbed-block">
<p>the specific output coordinate system of the parent that this instance's location is based</p>
</div>
<div class="tabbed-block">
<p>derived from parent_csys and parent_csys_name</p>
</div>
<div class="tabbed-block">
<p>derived from parent_csys and parent_csys_name</p>
</div>
<div class="tabbed-block">
<p>derived from parent_csys and parent_csys_name</p>
</div>
<div class="tabbed-block">
<p>manual add, not nominally used unless it's a flagnote, segment, or node</p>
</div>
<div class="tabbed-block">
<p>imported csys children from library attributes file</p>
</div>
<div class="tabbed-block">
<p>other instances associated with this one because they are part of the same cable will share this value</p>
</div>
<div class="tabbed-block">
<p>which cable is this instance physically bundled inside of</p>
</div>
<div class="tabbed-block">
<p>cable unique identifier</p>
</div>
<div class="tabbed-block">
<p>derived from formboard definition, the length of a segment</p>
</div>
<div class="tabbed-block">
<p>derived from formboard definition, the tolerance on the length of a segment</p>
</div>
<div class="tabbed-block">
<p>apparent diameter of a segment &lt;---------- change to print_diameter</p>
</div>
<div class="tabbed-block">
<p>see harnice.utils.appearance for details</p>
</div>
<div class="tabbed-block">
<p>build_note, rev_note, etc</p>
</div>
<div class="tabbed-block">
<p>if there is a counter involved (rev, bom, build_note, etc)</p>
</div>
<div class="tabbed-block">
<p>the instance the note applies to. typically don't use this in the instances list, just note_utils</p>
</div>
<div class="tabbed-block">
<p>the content of the note</p>
</div>
<div class="tabbed-block">
<p>list of instances that are affected by the note</p>
</div>
<div class="tabbed-block">
<p>publically-traceable URL of the library this instance is from</p>
</div>
<div class="tabbed-block">
<p>path to the instance within the library (directories between the product type and the part number)</p>
</div>
<div class="tabbed-block">
<p>description of the instance per the library's revision history</p>
</div>
<div class="tabbed-block">
<p>the latest revision of the instance that exists in the remote library</p>
</div>
<div class="tabbed-block">
<p>the revision of the instance that is currently used in this project</p>
</div>
<div class="tabbed-block">
<p>the status of the instance per the library's revision history</p>
</div>
<div class="tabbed-block">
<p>documentation needed</p>
</div>
<div class="tabbed-block">
<p>the date this instance was first added to the library</p>
</div>
<div class="tabbed-block">
<p>the date this instance was last modified in the library</p>
</div>
<div class="tabbed-block">
<p>the date this instance was released in the library, if applicable, per the library's revision history</p>
</div>
<div class="tabbed-block">
<p>the name of the person who drew the instance, per the library's revision history</p>
</div>
<div class="tabbed-block">
<p>the name of the person who checked the instance, per the library's revision history</p>
</div>
<div class="tabbed-block">
<p>a flag to indicate if the imported contents do not match the library's version (it's been locally modified)</p>
</div>
<div class="tabbed-block">
<p>recommended build notes that come with the instance from the library</p>
</div>
<div class="tabbed-block">
<p>recommended tools that come with the instance from the library</p>
</div>
<div class="tabbed-block">
<p>if connector, refdes of the device it plugs into</p>
</div>
<div class="tabbed-block">
<p>if connector, name of the connector it plugs into</p>
</div>
<div class="tabbed-block">
<p>if connector, mpn of the connector it plugs into</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the refdes of the device it interfaces with, just within this net</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the channel id in the device it interfaces with, just within this net</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the name of the connector it interfaces with, just within this net</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the refdes of the device it plugs into just within this net</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the channel id in the device it plugs into, just within this net</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the name of the connector it plugs into, just within this net</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the refdes of the device it interfaces with, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the channel id in the device it interfaces with, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the refdes of the device it plugs into, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the channel id in the device it plugs into, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the type of the channel it interfaces with, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the type of the channel it plugs into, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>if this instance is a channel, circuit, conductor, etc, the signal of the channel it interfaces with, at the very end of the channel</p>
</div>
<div class="tabbed-block">
<p>the call chain of the function that last modified this instance row</p>
</div>
<div class="tabbed-block">
<p>blank cell to visually cut off the previous column</p>
</div>
</div>
</div>
<hr />
<h2 id="commands">Commands:</h2>
<p><em>Use the following functions by first importing the module in your script like this: 
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice.lists</span><span class="w"> </span><span class="kn">import</span> <span class="n">instances_list</span>
</span></code></pre></div>
 then use as written.</em></p>
<details class="info">
<summary><code>instances_list.new_instance(instance_name, instance_data, ignore_duplicates=False)</code></summary>
<p>New Instance</p>
<p>instances_list.new_instance(
    instance_name,
    instance_data,
    ignore_duplicates=False
)</p>
<p>Add a new instance to your instances list.</p>
<div class="language-text highlight"><pre><span></span><code>instance_name is a string and must be unique within the list.
instance_data is a dictionary of columns (above). You may or may not include instance_name in this dict, though if you do and it doesn&#39;t match the argument, the code will fail.
Setting ignore_duplicates to True will cause the line to pass silently if you try to add an instance with an instance_name that already exists. By default, False, if you do this, the code will raise an error if you try to add a duplicate instance_name.

Args:
    instance_name: string, must be unique within the list
    instance_data: dictionary of columns (above)
    ignore_duplicates: boolean, default False

Returns:
    -1 if the instance was added successfully, otherwise raises an error
</code></pre></div>
</details>
<details class="info">
<summary><code>instances_list.modify(instance_name, instance_data)</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>instances_list.remove_instance(instance_to_delete)</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>instances_list.new()</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>instances_list.assign_bom_line_numbers()</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>instances_list.attribute_of(target_instance, attribute)</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>instances_list.instance_in_connector_group_with_item_type(connector_group, item_type)</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>instances_list.list_of_uniques(attribute)</code></summary>
<p>Documentation needed.</p>
</details>
</details>
<details class="info">
<summary>Signals Lists</summary>
<h1 id="interacting-with-signals-lists">Interacting with Signals Lists</h1>
<p>A Signals List is an exhaustive list of every signal is going into or out of a thing. Signals Lists are the primary way Harnice stores information about devices, and act as the source of truth for devices and disconnects.</p>
<hr />
<h2 id="signals-list-validation-checks">Signals List Validation Checks:</h2>
<p><em>(These are automatically validated when you render the device or disconnect that owns the list.)</em></p>
<h3 id="general-signals-list-rules">General Signals List Rules</h3>
<ul>
<li>
<p>Every signal in the Signals List must be contained by a pre-defined channel type</p>
<details class="info">
<summary>Channel Types</summary>
<h1 id="channel-types">Channel Types</h1>
<hr />
<h2 id="how-are-channels-mapped">How are channels mapped?</h2>
<hr />
<h2 id="how-to-define-a-new-channel-type">How to define a new channel type</h2>
<ol>
<li>In a repository of your choice (or start with <a href="https://github.com/harnice/harnice">harnice_library_public</a> on your own branch), navigate to <code>library_repo/channel_types/channel_types.csv</code></li>
<li>If you want channel definitions to be private and are therefore working in a private repository, ensure the repo's path is listed in file <code>library_locations.csv</code> (located at root of your harnice source code repo). The first column is the URL or traceable path, and the second column is your local path.</li>
<li>If you find the channel_type you're looking for, temporarily note it as a touple in a notepad somewhere with format <code>(ch_type_id, universal_library_repository)</code>. </li>
<li>If you don't find it, make a new one. It's important to try and reduce the number of channel_types in here to reduce complexity, but it's also important that you adhere to strict and true rules about what is allowed to be mapped to what. Modifications and additions to this document should be taken and reviewed very seriously.</li>
</ol>
<details class="info">
<summary><code>chtype.path(channel_type)</code></summary>
<p>Resolve the on-disk path to the <code>channel_types.tsv</code> file for a given
channel type.</p>
<p><strong>Args</strong></p>
<ul>
<li><code>channel_type</code>: Channel type identifier in standard tuple format
    <code>(channel_type_id, lib_repo)</code> or any string representation that <code>parse</code>
    can understand (for example <code>"(5, 'https://github.com/harnice/harnice')"</code>).</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>str</code>: Absolute path to the <code>channel_types/channel_types.tsv</code> file inside
    the library repository that owns the given channel type.</li>
</ul>
<p><strong>Notes</strong></p>
<ul>
<li>This does <strong>not</strong> filter rows; it only locates the TSV file that defines
    all channel types for the given <code>lib_repo</code>.</li>
</ul>
</details>
<details class="info">
<summary><code>chtype.parse(val)</code></summary>
<p>Convert stored string into a tuple (chid:int, lib_repo:str).
Handles both single tuples and extracts first tuple from lists.</p>
</details>
<details class="info">
<summary><code>chtype.compatibles(channel_type)</code></summary>
<p>Look up other channel types that are declared as compatible with the given
channel type.</p>
<p><strong>Args</strong></p>
<ul>
<li><code>channel_type</code>: Channel type identifier in standard tuple format
    <code>(channel_type_id, lib_repo)</code> or any string representation that <code>parse</code>
    can understand.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>list[tuple[int, str]]</code>: List of <code>(channel_type_id, lib_repo)</code> tuples taken
    directly from the <code>compatible_channel_types</code> column of <code>channel_types.tsv</code>.
    Returns an empty list if no compatibles are defined or if the channel type
    cannot be found.</li>
</ul>
<p><strong>Data format</strong></p>
<ul>
<li>The <code>compatible_channel_types</code> column must be an AST-parseable Python value:<ul>
<li>Single tuple: <code>(1, "library_repo")</code></li>
<li>List of tuples: <code>[(1, "library_repo"), (2, "library_repo")]</code></li>
</ul>
</li>
</ul>
</details>
<details class="info">
<summary><code>chtype.attribute(channel_type, attribute)</code></summary>
<p>Read any additional column from <code>channel_types.tsv</code> for a given channel
type.</p>
<p><strong>Args</strong></p>
<ul>
<li><code>channel_type</code>: Channel type identifier in standard tuple format
    <code>(channel_type_id, lib_repo)</code> or any string representation that <code>parse</code>
    can understand.</li>
<li><code>attribute</code>: Column header name in <code>channel_types.tsv</code> for the value you
    want to read (for example <code>"description"</code>, <code>"notes"</code>, <code>"voltage_rating"</code>).</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>Any</code>: Value stored in the requested <code>attribute</code> column for the matching
    <code>channel_type_id</code>. Returns an empty list <code>[]</code> if the channel type cannot
    be found.</li>
</ul>
<p><strong>Notes</strong></p>
<ul>
<li>Use this for any per-channel-type metadata you've added as extra columns
    beyond the core ones like <code>channel_type_id</code>, <code>signals</code>, and
    <code>compatible_channel_types</code>.</li>
</ul>
</details>
<details class="info">
<summary><code>chtype.signals(channel_type)</code></summary>
<p>Return the list of signal names associated with a specific channel type.</p>
<p><strong>Args</strong></p>
<ul>
<li><code>channel_type</code>: Channel type identifier in standard tuple format
    <code>(channel_type_id, lib_repo)</code> or any string representation that <code>parse</code>
    can understand.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>list[str]</code>: List of signal names from the <code>signals</code> column of
    <code>channel_types.tsv</code> for the matching <code>channel_type_id</code>. If the column is
    blank or the channel type cannot be found, returns an empty list.</li>
</ul>
<p><strong>Data format</strong></p>
<ul>
<li>The <code>signals</code> column is expected to be a comma-separated string, for
    example: <code>"CAN_H, CAN_L, SHIELD"</code>.</li>
</ul>
</details>
<details class="info">
<summary><code>chtype.is_or_is_compatible_with(channel_type)</code></summary>
<p>Return the given channel type plus all channel types declared as compatible
with it.</p>
<p><strong>Args</strong></p>
<ul>
<li><code>channel_type</code>: Channel type identifier in standard tuple format
    <code>(channel_type_id, lib_repo)</code> or any string representation that <code>parse</code>
    can understand.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>list[tuple[int, str]]</code>: List of <code>(channel_type_id, lib_repo)</code> tuples where
    the first entry is the parsed <code>channel_type</code> itself and the remaining
    entries are the compatibles returned by <code>compatibles(channel_type)</code>.</li>
</ul>
<p><strong>Typical use</strong></p>
<ul>
<li>Use this when validating or mapping channels and you want to treat a
    channel type as valid if it is either exactly the requested type or
    explicitly listed as compatible with it.</li>
</ul>
</details>
</details>
</li>
<li>
<p>Each signal in the signals list must have every other signal defined by its channel type also present in the list.</p>
<ul>
<li>you can't just define 'positive' if the channel type requires 'positive' and 'negative'</li>
</ul>
</li>
<li>
<p>Each signal defined in the list is contained by one or more cavities of connectors. </p>
<ul>
<li>you can't "cap off" or not populate one of the signals within a channel because that changes the channel type.</li>
</ul>
</li>
<li>
<p>Every combination of (channel_id, signal) must be unique within the signals list</p>
<ul>
<li>you cant have two i.e. ch1, pos signals on the same device</li>
<li>if you need to break one signal out onto multiple conductors, you'll need to change the channel type to one that defines multiple conductors (i.e. named "ch1, pos-1")</li>
</ul>
</li>
<li>
<p>You cant put signals of the same channel on different connectors</p>
<ul>
<li>
<p>this is because doing so breaks a lot of internal assumptions Harnice is making while mapping channels.</p>
</li>
<li>
<p>the following two options are recommended work-arounds:</p>
<ul>
<li>
<p><strong>Most correct but confusing:</strong> Define one channel type per signal, then manually chmap your channels or write a macro for mapping the channels to their respective destinations.</p>
</li>
<li>
<p><strong>Janky but easiest to understand:</strong> Define a connector part number that actually represents multiple connectors, while using cavities to reference each connector.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="configurable-device-signals-list-rules">Configurable Device Signals List Rules</h3>
<p>It is often useful to be able to change the signals list based on how you're using the device. </p>
<ul>
<li>
<p><strong>Each possible configuration of a device must define the same number of conductors throughout the device</strong></p>
<ul>
<li>Changing a configuration must not alter physical build, form, fit, or function, and thus there shall be no conductors that are added or taken away. Maybe some signals are 'unused', but they have to at least be counted for across all configurations.</li>
</ul>
</li>
<li>
<p><strong>There can be an unlimited number of configuration variables</strong></p>
<ul>
<li>Sometimes just one variable is useful: an SM58 microphone can produce output signals in either balanced vs unbalanced format, depending on how you want to use it.</li>
<li>Sometimes there are many variables: suppose you have a mixing console with 32 inputs, and each input can accept either mic or line level inputs depending on the configuration, and each accept either in balanced or unbalanced format signals. Because there's a channel-type defined for each of those options, this would imply 64 configuration variables of the mixing console, each mapping to a unique configuration. This allows the auto channel mapper to find compatibles, and also helps the user track how to set up their device.</li>
</ul>
</li>
</ul>
<h3 id="disconnect-signals-list-rules">Disconnect Signals List Rules</h3>
<ul>
<li>
<p>A and B channels of the same disconnect must be compatible with each other</p>
<ul>
<li>this is to ensure when you actually mate the disconnect that the channels inside will be compatible.</li>
</ul>
</li>
</ul>
<hr />
<h2 id="columns_1">Columns</h2>
<p><em>Columns are automatically generated when <code>signals_list.new()</code> is called. Additional columns are not supported and may result in an error when parsing.</em></p>
<h3 id="columns-of-signals-lists-for-devices">Columns of Signals Lists for Devices</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:7"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><input id="__tabbed_2_6" name="__tabbed_2" type="radio" /><input id="__tabbed_2_7" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1"><code>channel_id</code></label><label for="__tabbed_2_2"><code>signal</code></label><label for="__tabbed_2_3"><code>connector_name</code></label><label for="__tabbed_2_4"><code>cavity</code></label><label for="__tabbed_2_5"><code>connector_mpn</code></label><label for="__tabbed_2_6"><code>channel_type</code></label><label for="__tabbed_2_7"><code>config_variable</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Unique identifier for the channel.</p>
</div>
<div class="tabbed-block">
<p>Name of the electrical function of that signal, as it pertains to its channel type defition. i.e. "positive"</p>
</div>
<div class="tabbed-block">
<p>Unique identifier for the connector that this signal and channel is a part of.</p>
</div>
<div class="tabbed-block">
<p>Identifier of the pin, socket, stud, etc, that this signal is internally electrically routed to within its connector.</p>
</div>
<div class="tabbed-block">
<p>MPN of the connector in this device (NOT the mating connector).</p>
</div>
<div class="tabbed-block">
<p>The channel type of this signal. 
Touple <code>(x, y)</code> where x is the channel id within a library repo and y is the traceable name or url where that channel type library is defined</p>
</div>
<div class="tabbed-block">
<p>Change header or add more headers as needed. Blank: row is true across all values of this field. Otherwise, row is only true when configuration matches the value of this field.</p>
</div>
</div>
</div>
<h3 id="columns-of-signals-lists-for-disconnects">Columns of Signals Lists for Disconnects</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:8"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><input id="__tabbed_3_7" name="__tabbed_3" type="radio" /><input id="__tabbed_3_8" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1"><code>channel_id</code></label><label for="__tabbed_3_2"><code>signal</code></label><label for="__tabbed_3_3"><code>A_cavity</code></label><label for="__tabbed_3_4"><code>B_cavity</code></label><label for="__tabbed_3_5"><code>A_connector_mpn</code></label><label for="__tabbed_3_6"><code>A_channel_type</code></label><label for="__tabbed_3_7"><code>B_connector_mpn</code></label><label for="__tabbed_3_8"><code>B_channel_type</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Unique identifier for the channel.</p>
</div>
<div class="tabbed-block">
<p>Name of the electrical function of that signal, as it pertains to its channel type defition. i.e. "positive"</p>
</div>
<div class="tabbed-block">
<p>Identifier of the pin, socket, stud, etc, that this signal is internally electrically routed to within that side of the connector.</p>
<details class="question">
<summary>Why are A and B different here?</summary>
<p>Sometimes it's possible to have connectors that have cavities that may mate electrically, but have different names. For example, suppose two connectors physically mate, but are made by different manufacturers. One manufacturer used lowercase (a, b, c) to reference the cavities but the other used uppercase (A, B, C), or numbers (1, 2, 3), or colors (red, green, blue), etc.</p>
</details>
</div>
<div class="tabbed-block">
<p>Identifier of the pin, socket, stud, etc, that this signal is internally electrically routed to within that side of the connector.</p>
<details class="question">
<summary>Why are A and B different here?</summary>
<p>Sometimes it's possible to have connectors that have cavities that may mate electrically, but have different names. For example, suppose two connectors physically mate, but are made by different manufacturers. One manufacturer used lowercase (a, b, c) to reference the cavities but the other used uppercase (A, B, C), or numbers (1, 2, 3), or colors (red, green, blue), etc.</p>
</details>
</div>
<div class="tabbed-block">
<p>MPN of the connector of the harness on this side of the disconnect</p>
</div>
<div class="tabbed-block">
<p>The channel type of this side of the discconect.</p>
<details class="question">
<summary>Why are A and B different here?</summary>
<p>It's important to keep track of which side has which channel type so that you cannot accidentally flip pins and sockets, for example, by mapping the wrong channel type to the wrong pin gender. Careful validation should be done when mapping channels through disconnects to ensure the disconnects have channels that pass through them in the correct direction.</p>
</details>
</div>
<div class="tabbed-block">
<p>MPN of the connector of the harness on this side of the disconnect</p>
</div>
<div class="tabbed-block">
<p>The channel type of this side of the discconect.</p>
<details class="question">
<summary>Why are A and B different here?</summary>
<p>It's important to keep track of which side has which channel type so that you cannot accidentally flip pins and sockets, for example, by mapping the wrong channel type to the wrong pin gender. Careful validation should be done when mapping channels through disconnects to ensure the disconnects have channels that pass through them in the correct direction.</p>
</details>
</div>
</div>
</div>
<hr />
<hr />
<h2 id="commands_1">Commands:</h2>
<p><em>Use the following functions by first importing the module in your script like this: 
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">harnice.lists</span><span class="w"> </span><span class="kn">import</span> <span class="n">signals_list</span>
</span></code></pre></div>
 then use as written.</em></p>
<details class="info">
<summary><code>signals_list.set_list_type(x)</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>signals_list.new()</code></summary>
<p>Creates a new signals TSV file at fileio.path("signals list") with only the header row.
Overwrites any existing file.</p>
</details>
<details class="info">
<summary><code>signals_list.append(**kwargs)</code></summary>
<p>Appends a new row to the signals TSV file.
Missing optional fields will be written as empty strings.
Raises ValueError if required fields are missing.</p>
<p>Required kwargs:
    For 'device':
        channel_id, signal, connector_name, cavity, connector_mpn, channel_type
    For 'disconnect':
        A_channel_id, A_signal, A_connector_name, A_cavity, A_connector_mpn, A_channel_type,
        B_channel_id, B_signal, B_connector_name, B_cavity, B_connector_mpn, B_channel_type</p>
</details>
<details class="info">
<summary><code>signals_list.cavity_of_signal(channel_id, signal, path_to_signals_list)</code></summary>
<p>Documentation needed.</p>
</details>
<details class="info">
<summary><code>signals_list.connector_name_of_channel(channel_id, path_to_signals_list)</code></summary>
<p>Documentation needed.</p>
</details>
<hr />
</details>
<p>Here's a more detailed diagram of the Harnice workflow including the information covered so far. </p>
<p><img alt="Workflow overview graph" src="../images/the_basics_images/workflow_overview_2.png" /></p>
<h1 id="part-numbering"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M10.5 0a5.499 5.499 0 1 1-1.288 10.848l-.932.932a.75.75 0 0 1-.53.22H7v.75a.75.75 0 0 1-.22.53l-.5.5a.75.75 0 0 1-.53.22H5v.75a.75.75 0 0 1-.22.53l-.5.5a.75.75 0 0 1-.53.22h-2A1.75 1.75 0 0 1 0 14.25v-2c0-.199.079-.389.22-.53l4.932-4.932A5.5 5.5 0 0 1 10.5 0m-4 5.5c-.001.431.069.86.205 1.269a.75.75 0 0 1-.181.768L1.5 12.56v1.69c0 .138.112.25.25.25h1.69l.06-.06v-1.19a.75.75 0 0 1 .75-.75h1.19l.06-.06v-1.19a.75.75 0 0 1 .75-.75h1.19l1.023-1.025a.75.75 0 0 1 .768-.18A4 4 0 1 0 6.5 5.5M11 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/></svg></span> Part Numbering</h1>
<p>Harnice is designed to work with git: every file format works well with <code>git diff</code>. However, even so, revisions of products are inevitable: if you release a part, start building it, then realize something needs to change, what do you do?</p>
<pre class="mermaid"><code>    graph LR
        A[change in design required] --&gt; B{change in form/fit/function?};
        B --&gt;|Yes| C[new revision&lt;br/&gt;ABC-123-rev2];
        B --&gt;|No| D[new part number&lt;br/&gt;ABC-124-rev1];</code></pre>
<p>Change in <a href="https://en.wikipedia.org/wiki/Form,_fit_and_function">form, fit and function</a> is a common way for engineers to draw the line between rolling a rev and rolling a part number. </p>
<p>Harnice bakes revisions into part numbers, allowing you to spend your time worrying about engineering, not configuration management.</p>
<p>Before you render a product, the CLI will force you to operate in a rev folder. Revision history and statuses of a product is stored in a csv, and Harnice will not render a revision if the "status" column is not blank. That column is where you can record if a revision has been released, superseded, obsoleted, etc.</p>
<h1 id="mapping-vocabulary">Mapping Vocabulary</h1>
<details class="note">
<summary>Mapping vocabulary</summary>
<p><img alt="Vocabulary graphic" src="../../fragments/fragments_images/terminology.png" /></p>
<p><strong>Net:</strong></p>
<ul>
<li>Requirement that a harness must exist to connect some connectors together.</li>
</ul>
<p><strong>Harness:</strong></p>
<ul>
<li>A harness is an assembly of connectors, cables, and other electrical components that connect multiple devices together. It is the physical item that is built and installed in a system.</li>
</ul>
<p><strong>Channel:</strong></p>
<ul>
<li>A channel is a set of signals that transmit or receive one piece of information, power, etc. They have "channel_types" which define their attributes and compatibility with other channels, and contain a list of required signals (pos, neg)</li>
</ul>
<p><strong>Signal:</strong></p>
<ul>
<li>A signal is a physical conductive part inside a connector of a device that facilitiates electrical interface with the outside world. A signal must be part of a channel and live inside a connector.</li>
</ul>
<p><strong>Circuit:</strong></p>
<ul>
<li>A circuit is the requirement that there must exist an electrical path between two signals of connected devices. You can assign conductors or other electrical elements along it. Instances assigned along the circuit have "circuit ids" which represent the order in which the circuit passes through them.</li>
</ul>
<p><strong>Conductor:</strong></p>
<ul>
<li>A piece of copper, sometimes contained in a cable. Has as many properties, appearances, as you need</li>
</ul>
<p><strong>Cable:</strong></p>
<ul>
<li>A cable is a COTS or custom physical item, purchased by length, that contains electrical conductors, and are physically installed inside harnesses.</li>
</ul>
<h2 id="less-important-terms">Less important terms</h2>
<ul>
<li>
<p><strong>Contact:</strong></p>
<ul>
<li>The metal parts of a connector that does the actual mating with the other connector, allows for termination to a wire. Can be pins, sockets, studs, terminals, etc.</li>
</ul>
</li>
<li>
<p><strong>Cavity:</strong></p>
<ul>
<li>The hole in a connector that physically holds a contact</li>
</ul>
</li>
</ul>
</details>
<h1 id="the-workflow">The Workflow</h1>
<p><img alt="img_1" src="../images/the_story_images/the_story-1.png" />
<img alt="img_2" src="../images/the_story_images/the_story-2.png" />
<img alt="img_3" src="../images/the_story_images/the_story-3.png" />
<img alt="img_4" src="../images/the_story_images/the_story-4.png" />
<img alt="img_5" src="../images/the_story_images/the_story-5.png" />
<img alt="img_6" src="../images/the_story_images/the_story-6.png" />
<img alt="img_7" src="../images/the_story_images/the_story-7.png" />
<img alt="img_8" src="../images/the_story_images/the_story-8.png" />
<img alt="img_9" src="../images/the_story_images/the_story-9.png" />
<img alt="img_10" src="../images/the_story_images/the_story-10.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../installation/" class="md-footer__link md-footer__link--next" aria-label="Next: Installation">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Installation
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Kenyon Shutt
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>